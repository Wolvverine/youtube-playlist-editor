(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,n){},20:function(e,t,n){e.exports=n(41)},26:function(e,t,n){},28:function(e,t,n){},30:function(e,t,n){},35:function(e,t,n){},38:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),o=n(18),s=n.n(o),l=(n(26),n(6)),r=n(7),c=n(9),u=n(8),d=n(10),p=(n(28),n(11));function f(e,t,n,i){if(void 0===window.gapi.client||null===window.gapi.client)return console.log("buildApiRequest window.gapi.client is undefined or null"),null;var a;if(n=function(e){for(var t in e)!e.hasOwnProperty(t)||e[t]&&"undefined"!==e[t]||delete e[t];return e}(n),i){var o=function(e){var t={},n=e;for(var i in e){var a=e[i];if(i&&"[]"===i.substr(-2,2)){var o=i.replace("[]","");a&&(n[o]=a.split(",")),delete n[i]}}for(var s in n)if(n.hasOwnProperty(s)&&n[s])for(var l=s.split("."),r=t,c=0;c<l.length;c++){var u=l[c];c===l.length-1?r[u]=n[s]:r=r[u]=r[u]||{}}return t}(i);console.log("buildApiRequest resource",o),a=window.gapi.client.request({body:o,method:e,path:t,params:n})}else a=window.gapi.client.request({method:e,path:t,params:n});return a}function m(e){return f("GET","/youtube/v3/playlists",{mine:"true",part:"snippet,contentDetails",maxResults:"50",pageToken:e})}function v(e,t){return f("GET","/youtube/v3/playlistItems",{maxResults:"50",part:"snippet,contentDetails",playlistId:e,pageToken:t})}function h(e,t,n){void 0!==e&&null!==e?e.then(function(e){t&&t(e.result)}).catch(function(e){n&&n(e)}):console.log("executeRequest request is undefined or null")}function y(e,t,n,i,a,o){if(console.log("copyMultipleIntoPlaylist",e,t,n),n){for(var s=[],l=0;l<t.length;l++)s.push(f("POST","/youtube/v3/playlistItems",{part:"snippet"},{"snippet.playlistId":n,"snippet.resourceId.kind":"youtube#video","snippet.resourceId.videoId":t[l]}));for(var r=Promise.resolve(),c=s.length,u=function(n){r=r.then(function(){i&&i({index:n,total:c,operation:"copying",videoId:"".concat(t[n]),playlistItemId:"".concat(e[n])})}).then(function(){return s[n]}).then(function(){i&&i({index:n,total:c,operation:"copied",videoId:"".concat(t[n]),playlistItemId:"".concat(e[n])})})},d=0;d<c;d++)u(d);r.then(function(){console.log("copyMultipleIntoPlaylist: success"),a&&a()}).catch(function(e){console.log("copyMultipleIntoPlaylist: failure",e),o&&o({error:e.result.error})})}}function g(e,t,n,i,a,o){if(n){for(var s=[],l=0;l<t.length;l++)s.push(f("POST","/youtube/v3/playlistItems",{part:"snippet"},{"snippet.playlistId":n,"snippet.resourceId.kind":"youtube#video","snippet.resourceId.videoId":t[l]}));for(var r=[],c=0;c<e.length;c++)r.push(f("DELETE","/youtube/v3/playlistItems",{id:e[c]}));for(var u=Promise.resolve(),d=s.length,p=function(n){u=u.then(function(){i&&i({index:n+1,total:d,operation:"inserting",videoId:"".concat(t[n]),playlistItemId:"".concat(e[n])})}).then(function(){return s[n]}).then(function(){i&&i({index:n+1,total:d,operation:"removing",videoId:"".concat(t[n]),playlistItemId:"".concat(e[n])})}).then(function(){return r[n]}).then(function(){i&&i({index:n+1,total:d,operation:"removed",videoId:"".concat(t[n]),playlistItemId:"".concat(e[n])})})},m=0;m<d;m++)p(m);u.then(function(e){console.log("moveMultipleIntoPlaylist: call insertSuccessCallback"),a()}).catch(function(e){console.log("move failure",e),o&&o({error:e.result.error})})}}function b(e,t,n,i,a,o){if(console.log("removeMultipleFromPlaylist",e,t,n),n){for(var s=[],l=0;l<e.length;l++)s.push(f("DELETE","/youtube/v3/playlistItems",{id:e[l]}));for(var r=s.length,c=Promise.resolve(),u=function(n){c=c.then(function(){i&&i({index:n,total:r,operation:"removing",videoId:"".concat(t[n]),playlistItemId:"".concat(e[n])})}).then(function(){return s[n]}).then(function(){i&&i({index:n,total:r,operation:"removed",videoId:"".concat(t[n]),playlistItemId:"".concat(e[n])})})},d=0;d<r;d++)u(d);c.then(function(e){a()}).catch(function(e){console.log("remove failure",e),o&&o({error:e.result.error})})}}var E=n(42);n(30);function w(e,t){return e.snippet.title.toLowerCase()>t.snippet.title.toLowerCase()?1:t.snippet.title.toLowerCase()>e.snippet.title.toLowerCase()?-1:0}function k(e,t){var n=Date.parse(e.snippet.publishedAt),i=Date.parse(t.snippet.publishedAt);return n>i?1:i>n?-1:0}function I(e,t){return e.snippet.position>t.snippet.position?1:t.snippet.position>e.snippet.position?-1:0}function P(e,t){var n=Date.parse(e.contentDetails.publishedAt),i=Date.parse(t.contentDetails.publishedAt);return n>i?1:i>n?-1:0}function C(e,t){return t.snippet.title.toLowerCase()>e.snippet.title.toLowerCase()?1:e.snippet.title.toLowerCase()>t.snippet.title.toLowerCase()?-1:0}function S(e,t){var n=Date.parse(t.snippet.publishedAt),i=Date.parse(e.snippet.publishedAt);return n>i?1:i>n?-1:0}function A(e,t){return t.snippet.position>e.snippet.position?1:e.snippet.position>t.snippet.position?-1:0}function O(e,t){var n=Date.parse(t.contentDetails.publishedAt),i=Date.parse(e.contentDetails.publishedAt);return n>i?1:i>n?-1:0}var N=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).newPlaylistName=function(e){console.log("Playlists.newPlaylistName"),n.setState({newPlaylist:e.target.value})},n.createPlaylist=function(){n.state.newPlaylist&&h(f("POST","/youtube/v3/playlists",{part:"snippet,status",onBehalfOfContentOwner:""},{"snippet.title":n.state.newPlaylist,"snippet.description":"","snippet.tags[]":"","snippet.defaultLanguage":"","status.privacyStatus":"private"}),function(e){console.log("created playlist",e),n.retrieve()},n.createError)},n.store=function(e,t){if(console.log("Playlists.store"),e){var i=e.items;i.sort(w),void 0!==t&&t?n.setState(function(e){return{playlists:[].concat(Object(p.a)(e.playlists),Object(p.a)(i))}}):n.setState({playlists:i}),e.nextPageToken&&n.retrieve(e.nextPageToken)}},n.retrieve=function(e){console.log("Playlists.retrieve",e),h(m(e),function(t){return n.store(t,e)})},n.updateFilter=function(e){console.log("Playlists.updateFilter"),27===e.keyCode?n.setState({filter:""}):n.setState({filter:e.target.value})},n.refresh=function(){n.retrieve()},console.log("Playlists.constructor",e),n.state={isAuthorized:!1,playlists:null,newPlaylist:"",filter:""},n}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e,t){console.log("Playlists.componentDidUpdate"),this.state.isAuthorized&&null===this.state.playlists&&this.retrieve()}},{key:"componentDidMount",value:function(){console.log("Playlists.componentDidMount"),this.retrieve()}},{key:"render",value:function(){var e=this.state,t=e.isAuthorized,n=e.playlists,i=e.newPlaylist,o=e.filter;return console.log("Playlists render"),t?n?a.a.createElement("div",null,a.a.createElement("h2",null,"list of playlists"),a.a.createElement("button",{onClick:this.refresh},"refresh"),a.a.createElement("h3",null,n.length," playlists"),a.a.createElement("div",null,"new playlist:"," ",a.a.createElement("input",{type:"text",value:i,onChange:this.newPlaylistName})," ",a.a.createElement("button",{onClick:this.createPlaylist},"create")),a.a.createElement("div",{className:"filter"},"filter:"," ",a.a.createElement("input",{type:"text",onKeyUp:this.updateFilter})),a.a.createElement("div",null,n.filter(function(e){return e.snippet.title.toLowerCase().indexOf(o.toLowerCase())>-1}).map(function(e,t){return a.a.createElement("div",{key:t},a.a.createElement(E.a,{to:"/videos/".concat(e.id)},e.snippet.title," (",e.contentDetails.itemCount," ","videos)"))}))):a.a.createElement("div",null,"Retrieving the playlists..."):a.a.createElement("div",null)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return console.log("Playlists.getDerivedStateFromProps",e),e.isAuthorized!==t.isAuthorized?{isAuthorized:e.isAuthorized}:null}}]),t}(i.Component),D=n(12),j=(n(17),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).storePlaylists=function(e){if(e){var t=e.items;t.sort(w),n.setState({playlists:t})}},n.storeVideos=function(e,t){if(e){var i=e.items;i.sort(w),void 0!==t&&t?n.setState(function(e){return{videos:[].concat(Object(p.a)(e.videos),Object(p.a)(i))}}):n.setState({videos:i}),e.nextPageToken&&n.retrieveVideos(e.nextPageToken)}},n.updatePlaylistName=function(e){n.setState({playlistName:e})},n.retrievePlaylistName=function(){if(n.state.playlistId){var e=f("GET","/youtube/v3/playlists",{id:n.state.playlistId,part:"snippet,contentDetails"});e?e.then(function(e){try{this.updatePlaylistName(e.result.items[0].snippet.title)}catch(t){t instanceof TypeError?console.log("buildPlaylistNameRequest incomplete response",t):console.error("buildPlaylistNameRequest unexpected error",t)}},function(){console.warn("buildPlaylistNameRequest rejected")},Object(D.a)(Object(D.a)(n))):console.warn("req is null")}else console.warn("state.playlistId is empty")},n.retrieveVideos=function(e){n.setState({videosLoading:!0}),h(v(n.state.playlistId,e),function(t){return n.storeVideos(t,e)})},n.retrievePlaylists=function(){h(m(),n.storePlaylists)},n.removeFromPlaylistState=function(e){var t=n.state.videos,i=t.findIndex(function(t){return t.id===e});t.splice(i,1),n.setState({videos:t})},n.removeError=function(e){console.log("Videos.removeError",e.code,e.message)},n.remove=function(e){e&&h(f("DELETE","/youtube/v3/playlistItems",{id:e}),function(){return n.removeFromPlaylistState(e)},n.removeError)},n.createError=function(e){console.log("Videos.insertError",e)},n.insertError=function(e){console.log("Videos.insertError",e)},n.move=function(e,t,n){if(n){var i=f("POST","/youtube/v3/playlistItems",{part:"snippet"},{"snippet.playlistId":n,"snippet.resourceId.kind":"youtube#video","snippet.resourceId.videoId":t}),a=f("DELETE","/youtube/v3/playlistItems",{id:e}),o=null;return i.then(function(){return a.then(function(){o="OK"})}).catch(function(e){o=e.result?e.result.error.message:"unknow reason"}),o}},n.movep=function(e,t,n){},n.moveSuccess=function(e){var t=e.operation,i=e.data,a=e.videoId,o=e.videoItemId;switch(console.log("moveSuccess",t,a,o,i),t){case"insert":break;case"delete":n.removeFromPlaylistState(o);break;default:console.error("moveSuccess: unknown operation ".concat(t))}},n.moveFailure=function(e){console.log("moveFailure",e)},n.moveVisible=function(){console.log("Videos.moveVisible");var e=[],t=[];n.state.videos.filter(function(e){return e.snippet.title.toLowerCase().indexOf(n.state.filter.toLowerCase())>-1}).map(function(n){e.push(n.id),t.includes(n.contentDetails.videoId)||t.push(n.contentDetails.videoId)}),console.log("moveVisible",t,e),console.log("moveMultipleIntoPlaylist before"),g(e,t,n.state.moveToPlaylistId,n.moveSuccess,n.moveFailure),console.log("moveMultipleIntoPlaylist after")},n.setMoveToList=function(e){n.setState({moveToPlaylistId:e.target.value})},n.updateFilter=function(e){var t=e.target.value;n.setState({filter:t})},n.refresh=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];console.log("refresh"),n.state.isAuthorized&&(n.setState({playlistName:null,videos:null,playlists:null,videosLoading:!1,filter:e?"":n.state.filter}),n.retrievePlaylistName(),n.retrieveVideos(),n.retrievePlaylists())},n.state={isAuthorized:!1,playlistName:null,playlistId:e.match.params.playlistid,videos:null,playlists:null,moveToPlaylistId:null,filter:"",videosLoading:!1},n}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"componentDidUpdate",value:function(e,t){this.state.isAuthorized&&(null===this.state.playlistName&&(console.log("Videos.componentDidUpdate: call retrievePlaylistName"),this.retrievePlaylistName()),!this.state.videosLoading&&this.state.playlistId&&null===this.state.videos&&(console.log("Videos.componentDidUpdate: call retrieveVideos"),this.retrieveVideos()),null===this.state.playlists&&(console.log("Videos.componentDidUpdate: call retrievePlaylists"),this.retrievePlaylists()))}},{key:"render",value:function(){var e=this,t=this.state,n=t.isAuthorized,i=t.playlistId,o=t.playlistName,s=t.videos,l=t.playlists,r=t.moveToPlaylistId,c=t.filter;if(n){if(s){var u=s.filter(function(e){return e.snippet.title.toLowerCase().indexOf(c.toLowerCase())>-1});return u.sort(function(e,t){return e.snippet.title<t.snippet.title?-1:e.snippet.title>t.snippet.title?1:0}),a.a.createElement("div",{className:"videos"},a.a.createElement("h2",null,"Videos in ",o," :"),a.a.createElement("h3",null,s.length," videos"),a.a.createElement("button",{onClick:this.refresh},"refresh"),a.a.createElement("div",{className:"playlist-selector"},"target playlist:",l&&a.a.createElement("select",{onChange:this.setMoveToList},a.a.createElement("option",{value:""},"select list to move to"),l.map(function(e,t){return e.id===i?null:a.a.createElement("option",{key:t,value:e.id},e.snippet.title)}))),r&&a.a.createElement("div",null,a.a.createElement("button",{onClick:this.moveVisible},"move visible to target playlist")),a.a.createElement("div",{className:"filter"},"filter:"," ",a.a.createElement("input",{type:"text",defaultValue:c,onKeyUp:this.updateFilter})),a.a.createElement("div",null,u.map(function(t,n){return a.a.createElement("div",{key:n},a.a.createElement("a",{href:"https://www.youtube.com/watch?v=".concat(t.contentDetails.videoId),target:"_blank",rel:"noopener noreferrer"},t.snippet.title)," ",a.a.createElement("button",{onClick:function(){return e.remove(t.id)}},"remove"),r&&a.a.createElement("button",{onClick:function(){return e.movep(t.id,t.contentDetails.videoId,r)}},"move"))})))}return a.a.createElement("div",null,"Retrieving the list of videos...")}return a.a.createElement("div",null)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.isAuthorized!==t.isAuthorized?{isAuthorized:e.isAuthorized}:null}}]),t}(i.Component)),z=n(43),M=n(44),x=n(45),F=(n(35),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).store=function(e){console.log("Channels.store"),e&&n.setState({channels:e.items[0].contentDetails.relatedPlaylists})},n.retrieve=function(e){console.log("Channels.retrieve",e),h(f("GET","/youtube/v3/channels",{mine:"true",part:"contentDetails"}),n.store)},n.updateFilter=function(e){console.log("Channels.updateFilter"),27===e.keyCode?n.setState({filter:""}):n.setState({filter:e.target.value})},console.log("Channels.constructor",e),n.state={isAuthorized:!1,channels:null,filter:""},n}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e,t){console.log("Channels.componentDidUpdate"),this.state.isAuthorized&&null===this.state.channels&&this.retrieve()}},{key:"componentDidMount",value:function(){console.log("Channels.componentDidMount"),this.retrieve()}},{key:"render",value:function(){var e=this.state,t=e.isAuthorized,n=e.channels;e.filter;return console.log("Channels render",n),t?n?a.a.createElement("div",null,a.a.createElement("h2",null,"list of channels"),a.a.createElement("div",null,Object.keys(n).map(function(e,t){return a.a.createElement("div",{key:t},a.a.createElement(E.a,{to:"/videos/".concat(n[e])},e))}))):a.a.createElement("div",null,"Retrieving the channels..."):a.a.createElement("div",null)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return console.log("Channels.getDerivedStateFromProps",e),e.isAuthorized!==t.isAuthorized?{isAuthorized:e.isAuthorized}:null}}]),t}(i.Component)),T=n(3),L="snippetTitle",V="snippetPublishedAt",R="snippetPosition",U="videoPublishedAt",_=!0,q=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).setSortMethod=function(e,t){n.setState(Object(T.a)(function(n){n.lists[e].sortMethod===t?n.lists[e].sortDirection=!n.lists[e].sortDirection:n.lists[e].sortMethod=t}))},n.getSortFunction=function(e){var t=n.state.lists[e].sortDirection;switch(n.state.lists[e].sortMethod){case L:return t?w:C;case V:return t?k:S;case R:return t?I:A;case U:return t?P:O;default:return w}},n.storePlaylists=function(e){if(e){var t=e.items;t.sort(w),n.setState({playlists:t})}},n.storeVideos=function(e,t,i){if(t){var a=t.items;a.sort(w),n.setState(Object(T.a)(function(t){t.lists[e].videos=void 0!==i&&i?[].concat(Object(p.a)(t.lists[e].videos),Object(p.a)(a)):a})),t.nextPageToken&&n.retrieveVideos(e,t.nextPageToken)}},n.retrieveVideos=function(e,t){n.setState({errorMessage:null,videosLoading:!0}),h(v(n.state.lists[e].playlistId,t),function(i){return n.storeVideos(e,i,t)})},n.retrievePlaylists=function(){h(m(),n.storePlaylists)},n.refreshPlaylists=function(){n.retrievePlaylists()},n.refreshPlaylist=function(e){n.setState(Object(T.a)(function(t){t.lists[e].errorMessage=null,t.lists[e].videos=[]}),function(){return n.retrieveVideos(e)})},n.setPlaylist=function(e,t){var i=e.target.value;n.setState(Object(T.a)(function(e){e.lists[t].errorMessage=null,e.lists[t].playlistId=i}),function(){return n.retrieveVideos(t)})},n.removeFromPlaylistState=function(e,t){n.setState(Object(T.a)(function(n){for(var i=n.lists[e].videos,a=function(e){var n=i.findIndex(function(n){return n.id===t[e]});n>=0&&i.splice(n,1)},o=0;o<t.length;o++)a(o);n.lists[e].videos=i,n.lists[e].errorMessage=null}))},n.getVisibleIds=function(e){var t=n.state.lists[e].filter.toLowerCase(),i=[],a=[];return n.state.lists[e].videos.filter(function(e){return e.snippet.title.toLowerCase().indexOf(t)>-1}).forEach(function(e){i.push(e.id),a.includes(e.contentDetails.videoId)||a.push(e.contentDetails.videoId)}),{playlistItemIds:i,videoIds:a}},n.mark=function(e,t){n.setState(Object(T.a)(function(n){n.lists[e].marked=Array.isArray(t)?t:[t]}))},n.clearMarked=function(e){n.setState(Object(T.a)(function(t){t.lists[e].progressMessage=null,t.lists[e].marked=[]}))},n.progress=function(e,t){var i=t.index,a=t.total,o=t.operation,s=t.videoId,l=t.playlistItemId;n.setState(Object(T.a)(function(t){t.lists[e].progressMessage="".concat(i,"/").concat(a,": ").concat(o," ").concat(s);var n=t.lists[e].marked.findIndex(function(e){return e===l});n>=0&&t.lists[e].marked.splice(n,1)}))},n.failure=function(e,t){n.setState(Object(T.a)(function(n){n.lists[e].errorMessage=t.message}))},n.copy=function(e,t,i,a){n.mark(e,i),y([i],[a],n.state.lists[t].playlistId,function(t){return n.progress(e,t)},function(){n.retrievePlaylists(),n.refreshPlaylist(t)},function(t){return n.failure(e,t.error)})},n.copyAll=function(e,t){var i=n.getVisibleIds(e),a=i.playlistItemIds,o=i.videoIds;n.mark(e,a),y(a,o,n.state.lists[t].playlistId,function(t){return n.progress(e,t)},function(){n.retrievePlaylists(),n.refreshPlaylist(t),n.clearMarked(e)},function(t){return n.failure(e,t.error)})},n.move=function(e,t,i,a){n.mark(e,i),g([i],[a],n.state.lists[t].playlistId,function(t){n.progress(e,t),n.removeFromPlaylistState(e,[t.playlistItemId])},function(){n.retrievePlaylists(),n.refreshPlaylist(t),n.clearMarked(e)},function(t){return n.failure(e,t.error)})},n.moveAll=function(e,t){var i=n.getVisibleIds(e),a=i.playlistItemIds,o=i.videoIds;n.mark(e,a),g(a,o,n.state.lists[t].playlistId,function(t){n.progress(e,t),n.removeFromPlaylistState(e,[t.playlistItemId])},function(){n.retrievePlaylists(),n.refreshPlaylist(t),n.clearMarked(e)},function(t){return n.failure(e,t.error)})},n.remove=function(e,t,i){n.mark(e,t),b([t],[i],n.state.lists[e].playlistId,function(t){return n.progress(e,t)},function(){n.removeFromPlaylistState(e,[t]),n.clearMarked(e)},function(t){return n.failure(e,t.error)})},n.removeAll=function(e){var t=n.getVisibleIds(e),i=t.playlistItemIds,a=t.videoIds;n.mark(e,i),b(i,a,n.state.lists[e].playlistId,function(t){return n.progress(e,t)},function(){n.removeFromPlaylistState(e,i),n.clearMarked(e)},function(t){return n.failure(e,t.error)})},n.updateFilter=function(e,t){var i=e.target.value;n.setState(Object(T.a)(function(e){for(var n=0;n<e.lists.length;n++)(e.sync||n===t)&&(e.lists[n].errorMessage=null,e.lists[n].filter=i)}))},n.clearFilter=function(e){n.setState(Object(T.a)(function(t){t.lists[e].filter=""}))},n.refresh=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n.state.isAuthorized&&n.setState(Object(T.a)(function(e){e.videosLoading=!1,e.playlists=null;for(var n=0;n<e.lists;n++)e.lists[n]={playlistId:null,videos:[],filter:t?"":e.lists[n].filter,errorMessage:null}}),function(){return n.retrievePlaylists()})},n.dismissErrorMessage=function(e){n.setState(Object(T.a)(function(t){t.lists[e].errorMessage=null}))},n.toggleSync=function(){n.setState({sync:!n.state.sync})},n.state={isAuthorized:!1,videosLoading:!1,playlists:null,sync:!1,lists:[{playlistId:null,videos:[],filter:"",sortMethod:L,sortDirection:_,errorMessage:null,progressMessage:null,marked:[]},{playlistId:null,videos:[],filter:"",sortMethod:L,sortDirection:_,errorMessage:null,progressMessage:null,marked:[]}]},n}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"componentDidUpdate",value:function(e,t){this.state.isAuthorized&&null===this.state.playlists&&this.retrievePlaylists()}},{key:"render",value:function(){var e=this,t=this.state,n=t.isAuthorized,o=t.playlists,s=t.lists,l=t.sortDirection,r=t.sync;return n?a.a.createElement("div",{className:"lists"},s.map(function(t,n){var c=s[n].sortMethod,u=t.filter.toLowerCase(),d=t.videos.filter(function(e){return e.snippet.title.toLowerCase().indexOf(u)>-1}).sort(e.getSortFunction(n));return a.a.createElement("div",{className:"videos",key:n},o&&a.a.createElement("div",{className:"playlist-selector"},a.a.createElement("select",{onChange:function(t){return e.setPlaylist(t,n)}},a.a.createElement("option",{defaultValue:t.playlistId},"select playlist..."),o.map(function(e,t){return a.a.createElement("option",{key:t,value:e.id},e.snippet.title)}))," ",a.a.createElement("button",{onClick:e.refreshPlaylists},"refresh")," ",t.playlistId&&a.a.createElement("a",{href:"https://www.youtube.com/playlist?list=".concat(t.playlistId),target:"_blank",rel:"noopener noreferrer"},"open in YouTube")),t.errorMessage&&a.a.createElement("div",{className:"messages"},a.a.createElement("div",{className:"error"},t.errorMessage,a.a.createElement("div",{className:"dismiss"},a.a.createElement("button",{onClick:function(){return e.dismissErrorMessage(n)}},"dismiss")))),t.playlistId&&a.a.createElement("div",{className:"infos"},"There are ",t.videos.length," videos in this playlist.",t.videos.length>0&&a.a.createElement("button",{onClick:function(){return e.refreshPlaylist(n)}},"refresh the list of videos")),t.progressMessage&&a.a.createElement("div",{className:"progress"},t.progressMessage),t.videos&&t.videos.length>0&&a.a.createElement(i.Fragment,null,a.a.createElement("div",{className:"filtering"},0===n&&a.a.createElement("div",{className:"sync"},a.a.createElement("button",{onClick:e.toggleSync},"sync filter&sorting: ",r?"ON":"OFF")),a.a.createElement("div",{className:"filter"},"Filter: ",a.a.createElement("input",{type:"text",value:t.filter,onChange:function(t){return e.updateFilter(t,n)}}),a.a.createElement("button",{onClick:function(){return e.clearFilter(n)}},"clear filter"),d.length," videos shown")),d.length>0&&a.a.createElement("div",null,n%2?a.a.createElement("div",{className:"batch-actions"},"Apply to all videos shown below:",a.a.createElement("button",{title:"remove shown videos from the playlist",onClick:function(){return e.removeAll(n)}},a.a.createElement("i",{className:"fas fa-trash-alt"})," remove all"),a.a.createElement("button",{onClick:function(){return e.copyAll(n,n-1)}},a.a.createElement("i",{className:"fas fa-angle-double-left"})," copy all"),a.a.createElement("button",{onClick:function(){return e.moveAll(n,n-1)}},a.a.createElement("i",{className:"fas fa-angle-left"})," move all")):a.a.createElement("div",{className:"batch-actions"},"Apply to all videos shown below:",a.a.createElement("button",{title:"remove shown videos from the playlist",onClick:function(){return e.removeAll(n)}},a.a.createElement("i",{className:"fas fa-trash-alt"})," remove all"),a.a.createElement("button",{onClick:function(){return e.copyAll(n,n+1)}},"copy all ",a.a.createElement("i",{className:"fas fa-angle-double-right"})),a.a.createElement("button",{onClick:function(){return e.moveAll(n,n+1)}},"move all ",a.a.createElement("i",{className:"fas fa-angle-right"})))),a.a.createElement("div",{className:"sorting"},a.a.createElement("button",{onClick:function(){return e.setSortMethod(n,L)},className:c===L?"text-button active":"text-button"},"title",a.a.createElement("i",{className:l?"fas fa-sort-alpha-down":"fas fa-sort-alpha-up"})),a.a.createElement("button",{onClick:function(){return e.setSortMethod(n,V)},className:c===V?"text-button active":"text-button"},"added to playlist",a.a.createElement("i",{className:l?"fas fa-sort-numeric-down":"fas fa-sort-numeric-up"})),a.a.createElement("button",{onClick:function(){return e.setSortMethod(n,U)},className:c===U?"text-button active":"text-button"},"video created",a.a.createElement("i",{className:l?"fas fa-sort-numeric-down":"fas fa-sort-numeric-up"})),a.a.createElement("button",{onClick:function(){return e.setSortMethod(n,R)},className:c===R?"text-button active":"text-button"},"position",a.a.createElement("i",{className:l?"fas fa-sort-numeric-down":"fas fa-sort-numeric-up"}))),a.a.createElement("div",{className:"rows"},d.map(function(i,o){var s=t.marked.includes(i.id)?"marked":"";return a.a.createElement("div",{key:o,className:"row row-".concat(o%2," ").concat(s)},n%2?a.a.createElement("div",null,a.a.createElement("button",{className:"action-button",onClick:function(){return e.move(n,n-1,i.id,i.contentDetails.videoId)}},a.a.createElement("i",{className:"fas fa-angle-left"})," move"),a.a.createElement("button",{className:"action-button",onClick:function(){return e.copy(n,n-1,i.id,i.contentDetails.videoId)}},a.a.createElement("i",{className:"fas fa-angle-double-left"})," copy")):a.a.createElement("div",null,a.a.createElement("button",{className:"action-button",title:"remove from this playlist",onClick:function(){return e.remove(n,i.id,i.contentDetails.videoId)}},a.a.createElement("i",{className:"fas fa-trash-alt"}))),a.a.createElement("div",{className:"video-title"},a.a.createElement("a",{href:"https://www.youtube.com/watch?v=".concat(i.contentDetails.videoId),target:"_blank",rel:"noopener noreferrer"},i.snippet.title)),n%2?a.a.createElement("div",null,a.a.createElement("button",{className:"action-button",title:"remove from this playlist",onClick:function(){return e.remove(n,i.id,i.contentDetails.videoId)}},a.a.createElement("i",{className:"fas fa-trash-alt"}))):a.a.createElement("div",null,a.a.createElement("button",{className:"action-button",onClick:function(){return e.copy(n,n+1,i.id,i.contentDetails.videoId)}},"copy ",a.a.createElement("i",{className:"fas fa-angle-double-right"})),a.a.createElement("button",{className:"action-button",onClick:function(){return e.move(n,n+1,i.id,i.contentDetails.videoId)}},"move ",a.a.createElement("i",{className:"fas fa-angle-right"}))))}))))})):a.a.createElement("div",null)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.isAuthorized!==t.isAuthorized?{isAuthorized:e.isAuthorized}:null}}]),t}(i.Component),G=(n(38),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).store=function(e,t){if(e){var i=e.items;i.sort(w),n.setState(Object(T.a)(function(e){e.subscriptions=void 0!==t&&t?[].concat(Object(p.a)(e.subscriptions),Object(p.a)(i)):i})),e.nextPageToken&&n.retrieve(e.nextPageToken)}},n.retrieve=function(e){h(f("GET","/youtube/v3/subscriptions",{mine:"true",part:"snippet,contentDetails",maxResults:50,pageToken:e}),function(t){return n.store(t,e)})},n.storeChannelPlaylist=function(e,t){var i=t.items;i.sort(w),n.setState(Object(T.a)(function(t){t.subscriptionsPlaylists[e]=i}))},n.retrieveChannelPlaylists=function(e){h(function(e,t){return f("GET","/youtube/v3/playlists",{channelId:e,part:"snippet,contentDetails",maxResults:"50",pageToken:t})}(e),function(t){return n.storeChannelPlaylist(e,t)})},n.updateFilter=function(e){27===e.keyCode?n.setState({filter:""}):n.setState({filter:e.target.value})},n.clearFilter=function(){n.setState({filter:""})},n.refresh=function(){n.retrieve()},n.state={isAuthorized:!1,subscriptions:null,subscriptionsPlaylists:{},filter:""},n}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e,t){this.state.isAuthorized&&null===this.state.subscriptions&&this.retrieve()}},{key:"componentDidMount",value:function(){this.retrieve()}},{key:"render",value:function(){var e=this,t=this.state,n=t.isAuthorized,o=t.subscriptions,s=t.subscriptionsPlaylists,l=t.filter.toLowerCase();return n?o?a.a.createElement("div",null,a.a.createElement("h2",null,"list of subscriptions"),a.a.createElement("h3",null,o.length," subscriptions"),a.a.createElement("button",{onClick:this.refresh},"refresh"),a.a.createElement("div",{className:"filter"},"filter:"," ",a.a.createElement("input",{type:"text",onKeyUp:this.updateFilter}),a.a.createElement("button",{onClick:this.clearFilter},"clear filter")),a.a.createElement("div",{className:"subscriptions-list"},o.filter(function(e){return e.snippet.title.toLowerCase().indexOf(l)>-1||e.snippet.description.toLowerCase().indexOf(l)>-1}).map(function(t,n){var o=t.snippet.resourceId.channelId;return a.a.createElement(i.Fragment,{key:n},a.a.createElement("div",null,a.a.createElement(E.a,{to:"/videos/".concat(t.id)},t.snippet.title),a.a.createElement("a",{href:"https://www.youtube.com/channel/".concat(o),target:"_blank",rel:"noopener noreferrer"},"open")),a.a.createElement("div",null,t.snippet.description," ",a.a.createElement("button",{onClick:function(){return e.retrieveChannelPlaylists(o)}},"show playlists"),s[o]&&a.a.createElement("div",{className:"channel-playlists"},s[o].map(function(e,t){return a.a.createElement("a",{key:t,href:"https://www.youtube.com/playlist?list=".concat(e.id),target:"_blank",rel:"noopener noreferrer"},e.snippet.title," (",e.contentDetails.itemCount,")")}))))}))):a.a.createElement("div",null,"Retrieving the subscriptions..."):a.a.createElement("div",null)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.isAuthorized!==t.isAuthorized?{isAuthorized:e.isAuthorized}:null}}]),t}(i.Component)),W=function(e){function t(){var e,n;Object(l.a)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={google_api:null,user:null,isAuthorized:!1},n.setSigninStatus=function(){if(console.log("setSigninStatus",n.state.google_api),n.state.google_api){var e=n.state.google_api.currentUser.get(),t=e.hasGrantedScopes("https://www.googleapis.com/auth/youtube.force-ssl https://www.googleapis.com/auth/youtubepartner");n.setState({user:e,isAuthorized:t})}},n.updateSigninStatus=function(){n.setSigninStatus()},n.initClient=function(){console.log("initClient"),window.gapi.client.init({clientId:"1035406715321-fu4ktringpl82201dm2g9fm674akd203.apps.googleusercontent.com",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/youtube/v3/rest"],scope:"https://www.googleapis.com/auth/youtube.force-ssl https://www.googleapis.com/auth/youtubepartner"}).then(function(){console.log("initClient: success");var e=window.gapi.auth2.getAuthInstance();e.isSignedIn.listen(n.updateSigninStatus),n.setSigninStatus(),n.setState({google_api:e})}).catch(function(e){console.warn("initClient: auth error: ",e)})},n.authorize=function(){console.log("authorize"),window.gapi.auth2.getAuthInstance().grantOfflineAccess().then(function(e){e.code}),n.state.google_api.signIn().then(function(e){var t=e.getBasicProfile(),i=e.hasGrantedScopes("https://www.googleapis.com/auth/youtube.force-ssl https://www.googleapis.com/auth/youtubepartner");n.setState({user:e,userProfile:t,isAuthorized:i})})},n.grantAccess=function(){window.gapi.auth2.getAuthInstance().grantOfflineAccess({prompt:"consent"}).then(function(e){console.log("grantOfflineAccess",e);e.code})},n}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){window.gapi.load("client:auth2",this.initClient)}},{key:"render",value:function(){var e=this.state,t=e.isAuthorized,n=e.userProfile;return a.a.createElement(z.a,null,a.a.createElement("div",null,a.a.createElement("div",{className:"header"},"Youtube Playlist Editor",a.a.createElement("button",{onClick:this.grantAccess},"Grant access"),t?a.a.createElement("div",{className:"header-info"},"Authorized for ",n.getName()):a.a.createElement("span",null,a.a.createElement("button",{onClick:this.authorize},"Authorize")),t&&a.a.createElement(E.a,{className:"header-link",to:"/channels"},"Channels"),t&&a.a.createElement(E.a,{className:"header-link",to:"/playlists"},"Playlists"),t&&a.a.createElement(E.a,{className:"header-link",to:"/subscriptions"},"Subscriptions"),t&&a.a.createElement(E.a,{className:"header-link",to:"/videos2"},"Videos")),a.a.createElement("div",{className:"content"},!t&&a.a.createElement("div",null,a.a.createElement("p",null,"You need to authorize the application to access your Youtube playlists."),a.a.createElement("p",null,"Click the"," ",a.a.createElement("button",{onClick:this.authorize},"Authorize")," ","button to allow the access.")),a.a.createElement(M.a,null,a.a.createElement(x.a,{path:"/channels",render:function(e){return a.a.createElement(F,Object.assign({},e,{isAuthorized:t}))}}),a.a.createElement(x.a,{path:"/subscriptions",render:function(e){return a.a.createElement(G,Object.assign({},e,{isAuthorized:t}))}}),a.a.createElement(x.a,{path:"/playlists",render:function(e){return a.a.createElement(N,Object.assign({},e,{isAuthorized:t}))}}),a.a.createElement(x.a,{path:"/videos/:playlistid",render:function(e){return a.a.createElement(j,Object.assign({},e,{isAuthorized:t}))}}),a.a.createElement(x.a,{path:"/videos2",render:function(e){return a.a.createElement(q,Object.assign({},e,{isAuthorized:t}))}})))))}}]),t}(i.Component),B=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function K(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}function Y(){}console.log=Y,console.warn=Y,console.error=Y,s.a.render(a.a.createElement(W,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/youtube-playlist-editor",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/youtube-playlist-editor","/service-worker.js");B?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):K(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):K(e)})}}()}},[[20,2,1]]]);
//# sourceMappingURL=main.96dfe176.chunk.js.map