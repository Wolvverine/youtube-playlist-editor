(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,n){},20:function(e,t,n){e.exports=n(41)},26:function(e,t,n){},28:function(e,t,n){},30:function(e,t,n){},35:function(e,t,n){},38:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var i=n(0),s=n.n(i),a=n(18),o=n.n(a),r=(n(26),n(6)),l=n(7),c=n(10),u=n(8),d=n(9);n(28);function p(e,t,n,i){if(void 0===window.gapi.client||null===window.gapi.client)return console.log("buildApiRequest window.gapi.client is undefined or null"),null;var s;if(n=function(e){for(var t in e)!e.hasOwnProperty(t)||e[t]&&"undefined"!==e[t]||delete e[t];return e}(n),i){var a=function(e){var t={},n=e;for(var i in e){var s=e[i];if(i&&"[]"===i.substr(-2,2)){var a=i.replace("[]","");s&&(n[a]=s.split(",")),delete n[i]}}for(var o in n)if(n.hasOwnProperty(o)&&n[o])for(var r=o.split("."),l=t,c=0;c<r.length;c++){var u=r[c];c===r.length-1?l[u]=n[o]:l=l[u]=l[u]||{}}return t}(i);console.log("buildApiRequest resource",a),s=window.gapi.client.request({body:a,method:e,path:t,params:n})}else s=window.gapi.client.request({method:e,path:t,params:n});return s}function f(e){return p("GET","/youtube/v3/playlists",{mine:"true",part:"snippet,contentDetails",maxResults:"50",pageToken:e})}function m(e,t){return p("GET","/youtube/v3/playlistItems",{maxResults:"50",part:"snippet,contentDetails",playlistId:e,pageToken:t})}function v(e,t,n){void 0!==e&&null!==e?e.then(function(e){t&&t(e.result)}).catch(function(e){n&&n(e)}):console.log("executeRequest request is undefined or null")}function h(e,t,n,i,s,a){if(console.log("copyMultipleIntoPlaylist",e,t,n),n){for(var o=[],r=0;r<t.length;r++)o.push(p("POST","/youtube/v3/playlistItems",{part:"snippet"},{"snippet.playlistId":n,"snippet.resourceId.kind":"youtube#video","snippet.resourceId.videoId":t[r]}));for(var l=Promise.resolve(),c=function(n){l=l.then(function(){return o[n]}).then(function(){i&&i({videoId:"".concat(t[n]),playlistItemId:"".concat(e[n])})})},u=0;u<o.length;u++)c(u);l.then(function(){console.log("copyMultipleIntoPlaylist: success"),s&&s()}).catch(function(e){console.log("copyMultipleIntoPlaylist: failure",e),a&&a({error:e.result.error})})}}function y(e,t,n,i,s,a){if(n){for(var o=[],r=0;r<t.length;r++)o.push(p("POST","/youtube/v3/playlistItems",{part:"snippet"},{"snippet.playlistId":n,"snippet.resourceId.kind":"youtube#video","snippet.resourceId.videoId":t[r]}));for(var l=[],c=0;c<e.length;c++)l.push(p("DELETE","/youtube/v3/playlistItems",{id:e[c]}));for(var u=Promise.resolve(),d=function(n){u=u.then(function(){return o[n]}).then(function(){return l[n]}).then(function(){i&&i({videoId:"".concat(t[n]),playlistItemId:"".concat(e[n])})})},f=0;f<o.length;f++)d(f);u.then(function(e){console.log("moveMultipleIntoPlaylist: call insertSuccessCallback"),s()}).catch(function(e){console.log("move failure",e),a&&a({error:e.result.error})})}}function g(e,t,n,i,s,a){if(console.log("removeMultipleFromPlaylist",e,t,n),n){for(var o=[],r=0;r<e.length;r++)o.push(p("DELETE","/youtube/v3/playlistItems",{id:e[r]}));for(var l=Promise.resolve(),c=function(n){l=l.then(function(){return o[n]}).then(function(){i&&i({videoId:"".concat(t[n]),playlistItemId:"".concat(e[n])})})},u=0;u<o.length;u++)c(u);l.then(function(e){s()}).catch(function(e){console.log("remove failure",e),a&&a({error:e.result.error})})}}var b=n(42),E=(n(30),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).newPlaylistName=function(e){console.log("Playlists.newPlaylistName"),n.setState({newPlaylist:e.target.value})},n.createPlaylist=function(){n.state.newPlaylist&&v(p("POST","/youtube/v3/playlists",{part:"snippet,status",onBehalfOfContentOwner:""},{"snippet.title":n.state.newPlaylist,"snippet.description":"","snippet.tags[]":"","snippet.defaultLanguage":"","status.privacyStatus":"private"}),function(e){console.log("created playlist",e),n.retrieve()},n.createError)},n.store=function(e){if(console.log("Playlists.store"),e){var t=e.items;t.sort(function(e,t){return e.snippet.title.toLowerCase()>t.snippet.title.toLowerCase()?1:t.snippet.title.toLowerCase()>e.snippet.title.toLowerCase()?-1:0}),n.setState({playlists:t})}},n.retrieve=function(e){console.log("Playlists.retrieve",e),v(f(e),n.store)},n.updateFilter=function(e){console.log("Playlists.updateFilter"),27===e.keyCode?n.setState({filter:""}):n.setState({filter:e.target.value})},n.refresh=function(){n.retrieve()},console.log("Playlists.constructor",e),n.state={isAuthorized:!1,playlists:null,newPlaylist:"",filter:""},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){console.log("Playlists.componentDidUpdate"),this.state.isAuthorized&&null===this.state.playlists&&this.retrieve()}},{key:"componentDidMount",value:function(){console.log("Playlists.componentDidMount"),this.retrieve()}},{key:"render",value:function(){var e=this.state,t=e.isAuthorized,n=e.playlists,i=e.newPlaylist,a=e.filter;return console.log("Playlists render"),t?n?s.a.createElement("div",null,s.a.createElement("h2",null,"list of playlists"),s.a.createElement("button",{onClick:this.refresh},"refresh"),s.a.createElement("div",null,"new playlist:"," ",s.a.createElement("input",{type:"text",value:i,onChange:this.newPlaylistName})," ",s.a.createElement("button",{onClick:this.createPlaylist},"create")),s.a.createElement("div",{className:"filter"},"filter:"," ",s.a.createElement("input",{type:"text",onKeyUp:this.updateFilter})),s.a.createElement("div",null,n.filter(function(e){return e.snippet.title.toLowerCase().indexOf(a.toLowerCase())>-1}).map(function(e,t){return s.a.createElement("div",{key:t},s.a.createElement(b.a,{to:"/videos/".concat(e.id)},e.snippet.title," (",e.contentDetails.itemCount," ","videos)"))}))):s.a.createElement("div",null,"Retrieving the playlists..."):s.a.createElement("div",null)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return console.log("Playlists.getDerivedStateFromProps",e),e.isAuthorized!==t.isAuthorized?{isAuthorized:e.isAuthorized}:null}}]),t}(i.Component)),w=n(11),k=n(12),I=(n(17),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).storePlaylists=function(e){if(e){var t=e.items;t.sort(function(e,t){return e.snippet.title.toLowerCase()>t.snippet.title.toLowerCase()?1:t.snippet.title.toLowerCase()>e.snippet.title.toLowerCase()?-1:0}),n.setState({playlists:t})}},n.storeVideos=function(e,t){if(e){var i=e.items;i.sort(function(e,t){return e.snippet.title.toLowerCase()>t.snippet.title.toLowerCase()?1:t.snippet.title.toLowerCase()>e.snippet.title.toLowerCase()?-1:0}),void 0!==t&&t?n.setState(function(e){return{videos:[].concat(Object(w.a)(e.videos),Object(w.a)(i))}}):n.setState({videos:i}),e.nextPageToken&&n.retrieveVideos(e.nextPageToken)}},n.updatePlaylistName=function(e){n.setState({playlistName:e})},n.retrievePlaylistName=function(){if(n.state.playlistId){var e=p("GET","/youtube/v3/playlists",{id:n.state.playlistId,part:"snippet,contentDetails"});e?e.then(function(e){try{this.updatePlaylistName(e.result.items[0].snippet.title)}catch(t){t instanceof TypeError?console.log("buildPlaylistNameRequest incomplete response",t):console.error("buildPlaylistNameRequest unexpected error",t)}},function(){console.warn("buildPlaylistNameRequest rejected")},Object(k.a)(Object(k.a)(n))):console.warn("req is null")}else console.warn("state.playlistId is empty")},n.retrieveVideos=function(e){n.setState({videosLoading:!0}),v(m(n.state.playlistId,e),function(t){return n.storeVideos(t,e)})},n.retrievePlaylists=function(){v(f(),n.storePlaylists)},n.removeFromPlaylistState=function(e){var t=n.state.videos,i=t.findIndex(function(t){return t.id===e});t.splice(i,1),n.setState({videos:t})},n.removeError=function(e){console.log("Videos.removeError",e.code,e.message)},n.remove=function(e){e&&v(p("DELETE","/youtube/v3/playlistItems",{id:e}),function(){return n.removeFromPlaylistState(e)},n.removeError)},n.createError=function(e){console.log("Videos.insertError",e)},n.insertError=function(e){console.log("Videos.insertError",e)},n.move=function(e,t,n){if(n){var i=p("POST","/youtube/v3/playlistItems",{part:"snippet"},{"snippet.playlistId":n,"snippet.resourceId.kind":"youtube#video","snippet.resourceId.videoId":t}),s=p("DELETE","/youtube/v3/playlistItems",{id:e}),a=null;return i.then(function(){return s.then(function(){a="OK"})}).catch(function(e){a=e.result?e.result.error.message:"unknow reason"}),a}},n.movep=function(e,t,n){},n.moveSuccess=function(e){var t=e.operation,i=e.data,s=e.videoId,a=e.videoItemId;switch(console.log("moveSuccess",t,s,a,i),t){case"insert":break;case"delete":n.removeFromPlaylistState(a);break;default:console.error("moveSuccess: unknown operation ".concat(t))}},n.moveFailure=function(e){console.log("moveFailure",e)},n.moveVisible=function(){console.log("Videos.moveVisible");var e=[],t=[];n.state.videos.filter(function(e){return e.snippet.title.toLowerCase().indexOf(n.state.filter.toLowerCase())>-1}).map(function(n){e.push(n.id),t.includes(n.contentDetails.videoId)||t.push(n.contentDetails.videoId)}),console.log("moveVisible",t,e),console.log("moveMultipleIntoPlaylist before"),y(e,t,n.state.moveToPlaylistId,n.moveSuccess,n.moveFailure),console.log("moveMultipleIntoPlaylist after")},n.setMoveToList=function(e){n.setState({moveToPlaylistId:e.target.value})},n.updateFilter=function(e){var t=e.target.value;n.setState({filter:t})},n.refresh=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];console.log("refresh"),n.state.isAuthorized&&(n.setState({playlistName:null,videos:null,playlists:null,videosLoading:!1,filter:e?"":n.state.filter}),n.retrievePlaylistName(),n.retrieveVideos(),n.retrievePlaylists())},n.state={isAuthorized:!1,playlistName:null,playlistId:e.match.params.playlistid,videos:null,playlists:null,moveToPlaylistId:null,filter:"",videosLoading:!1},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"componentDidUpdate",value:function(e,t){this.state.isAuthorized&&(null===this.state.playlistName&&(console.log("Videos.componentDidUpdate: call retrievePlaylistName"),this.retrievePlaylistName()),!this.state.videosLoading&&this.state.playlistId&&null===this.state.videos&&(console.log("Videos.componentDidUpdate: call retrieveVideos"),this.retrieveVideos()),null===this.state.playlists&&(console.log("Videos.componentDidUpdate: call retrievePlaylists"),this.retrievePlaylists()))}},{key:"render",value:function(){var e=this,t=this.state,n=t.isAuthorized,i=t.playlistId,a=t.playlistName,o=t.videos,r=t.playlists,l=t.moveToPlaylistId,c=t.filter;if(n){if(o){var u=o.filter(function(e){return e.snippet.title.toLowerCase().indexOf(c.toLowerCase())>-1});return u.sort(function(e,t){return e.snippet.title<t.snippet.title?-1:e.snippet.title>t.snippet.title?1:0}),s.a.createElement("div",{className:"videos"},s.a.createElement("h2",null,"Videos in ",a," :"),s.a.createElement("h3",null,o.length," videos"),s.a.createElement("button",{onClick:this.refresh},"refresh"),s.a.createElement("div",{className:"playlist-selector"},"target playlist:",r&&s.a.createElement("select",{onChange:this.setMoveToList},s.a.createElement("option",{value:""},"select list to move to"),r.map(function(e,t){return e.id===i?null:s.a.createElement("option",{key:t,value:e.id},e.snippet.title)}))),l&&s.a.createElement("div",null,s.a.createElement("button",{onClick:this.moveVisible},"move visible to target playlist")),s.a.createElement("div",{className:"filter"},"filter:"," ",s.a.createElement("input",{type:"text",defaultValue:c,onKeyUp:this.updateFilter})),s.a.createElement("div",null,u.map(function(t,n){return s.a.createElement("div",{key:n},s.a.createElement("a",{href:"https://www.youtube.com/watch?v=".concat(t.contentDetails.videoId),target:"_blank",rel:"noopener noreferrer"},t.snippet.title)," ",s.a.createElement("button",{onClick:function(){return e.remove(t.id)}},"remove"),l&&s.a.createElement("button",{onClick:function(){return e.movep(t.id,t.contentDetails.videoId,l)}},"move"))})))}return s.a.createElement("div",null,"Retrieving the list of videos...")}return s.a.createElement("div",null)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.isAuthorized!==t.isAuthorized?{isAuthorized:e.isAuthorized}:null}}]),t}(i.Component)),P=n(43),C=n(45),S=n(44),A=(n(35),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).store=function(e){console.log("Channels.store"),e&&n.setState({channels:e.items[0].contentDetails.relatedPlaylists})},n.retrieve=function(e){console.log("Channels.retrieve",e),v(p("GET","/youtube/v3/channels",{mine:"true",part:"contentDetails"}),n.store)},n.updateFilter=function(e){console.log("Channels.updateFilter"),27===e.keyCode?n.setState({filter:""}):n.setState({filter:e.target.value})},console.log("Channels.constructor",e),n.state={isAuthorized:!1,channels:null,filter:""},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){console.log("Channels.componentDidUpdate"),this.state.isAuthorized&&null===this.state.channels&&this.retrieve()}},{key:"componentDidMount",value:function(){console.log("Channels.componentDidMount"),this.retrieve()}},{key:"render",value:function(){var e=this.state,t=e.isAuthorized,n=e.channels;e.filter;return console.log("Channels render",n),t?n?s.a.createElement("div",null,s.a.createElement("h2",null,"list of channels"),s.a.createElement("div",null,Object.keys(n).map(function(e,t){return s.a.createElement("div",{key:t},s.a.createElement(b.a,{to:"/videos/".concat(n[e])},e))}))):s.a.createElement("div",null,"Retrieving the channels..."):s.a.createElement("div",null)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return console.log("Channels.getDerivedStateFromProps",e),e.isAuthorized!==t.isAuthorized?{isAuthorized:e.isAuthorized}:null}}]),t}(i.Component)),O=n(3);function N(e,t){return e.snippet.title.toLowerCase()>t.snippet.title.toLowerCase()?1:t.snippet.title.toLowerCase()>e.snippet.title.toLowerCase()?-1:0}function D(e,t){var n=Date.parse(e.snippet.publishedAt),i=Date.parse(t.snippet.publishedAt);return n>i?1:i>n?-1:0}function j(e,t){return e.snippet.position>t.snippet.position?1:t.snippet.position>e.snippet.position?-1:0}function z(e,t){var n=Date.parse(e.contentDetails.publishedAt),i=Date.parse(t.contentDetails.publishedAt);return n>i?1:i>n?-1:0}function L(e,t){return t.snippet.title.toLowerCase()>e.snippet.title.toLowerCase()?1:e.snippet.title.toLowerCase()>t.snippet.title.toLowerCase()?-1:0}function M(e,t){var n=Date.parse(t.snippet.publishedAt),i=Date.parse(e.snippet.publishedAt);return n>i?1:i>n?-1:0}function F(e,t){return t.snippet.position>e.snippet.position?1:e.snippet.position>t.snippet.position?-1:0}function x(e,t){var n=Date.parse(t.contentDetails.publishedAt),i=Date.parse(e.contentDetails.publishedAt);return n>i?1:i>n?-1:0}var T="snippetTitle",V="snippetPublishedAt",R="snippetPosition",U="videoPublishedAt",_=!0,q=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).setSortMethod=function(e,t){n.setState(Object(O.a)(function(n){n.lists[e].sortMethod===t?n.lists[e].sortDirection=!n.lists[e].sortDirection:n.lists[e].sortMethod=t}))},n.getSortFunction=function(e){var t=n.state.lists[e].sortDirection;switch(n.state.lists[e].sortMethod){case T:return t?N:L;case V:return t?D:M;case R:return t?j:F;case U:return t?z:x;default:return N}},n.storePlaylists=function(e){if(e){var t=e.items;t.sort(N),n.setState({playlists:t})}},n.storeVideos=function(e,t,i){if(t){var s=t.items;s.sort(N),n.setState(Object(O.a)(function(t){t.lists[e].videos=void 0!==i&&i?[].concat(Object(w.a)(t.lists[e].videos),Object(w.a)(s)):s})),t.nextPageToken&&n.retrieveVideos(e,t.nextPageToken)}},n.retrieveVideos=function(e,t){n.setState({errorMessage:null,videosLoading:!0}),v(m(n.state.lists[e].playlistId,t),function(i){return n.storeVideos(e,i,t)})},n.retrievePlaylists=function(){v(f(),n.storePlaylists)},n.refreshPlaylists=function(){n.retrievePlaylists()},n.refreshPlaylist=function(e){n.setState(Object(O.a)(function(t){t.lists[e].errorMessage=null,t.lists[e].videos=[]}),function(){return n.retrieveVideos(e)})},n.setPlaylist=function(e,t){var i=e.target.value;n.setState(Object(O.a)(function(e){e.lists[t].errorMessage=null,e.lists[t].playlistId=i}),function(){return n.retrieveVideos(t)})},n.removeFromPlaylistState=function(e,t){n.setState(Object(O.a)(function(n){for(var i=n.lists[e].videos,s=function(e){var n=i.findIndex(function(n){return n.id===t[e]});n>=0&&i.splice(n,1)},a=0;a<t.length;a++)s(a);n.lists[e].videos=i,n.lists[e].errorMessage=null}))},n.getVisibleIds=function(e){var t=n.state.lists[e].filter.toLowerCase(),i=[],s=[];return n.state.lists[e].videos.filter(function(e){return e.snippet.title.toLowerCase().indexOf(t)>-1}).forEach(function(e){i.push(e.id),s.includes(e.contentDetails.videoId)||s.push(e.contentDetails.videoId)}),{playlistItemIds:i,videoIds:s}},n.mark=function(e,t){n.setState(Object(O.a)(function(n){n.lists[e].marked=Array.isArray(t)?t:[t]}))},n.clearMarked=function(e){n.setState(Object(O.a)(function(t){t.lists[e].marked=[]}))},n.progress=function(e,t){t.videoId;var i=t.playlistItemId;n.setState(Object(O.a)(function(t){var n=t.lists[e].marked.findIndex(function(e){return e===i});n>=0&&t.lists[e].marked.splice(n,1)}))},n.failure=function(e,t){n.setState(Object(O.a)(function(n){n.lists[e].errorMessage=t.message}))},n.copy=function(e,t,i,s){n.mark(e,i),h([i],[s],n.state.lists[t].playlistId,function(t){return n.progress(e,t)},function(){n.retrievePlaylists(),n.refreshPlaylist(t)},function(t){return n.failure(e,t.error)})},n.copyAll=function(e,t){var i=n.getVisibleIds(e),s=i.playlistItemIds,a=i.videoIds;n.mark(e,s),h(s,a,n.state.lists[t].playlistId,function(t){return n.progress(e,t)},function(){n.retrievePlaylists(),n.refreshPlaylist(t),n.clearMarked(e)},function(t){return n.failure(e,t.error)})},n.move=function(e,t,i,s){n.mark(e,i),y([i],[s],n.state.lists[t].playlistId,function(t){n.progress(e,t),n.removeFromPlaylistState(e,[t.playlistItemId])},function(){n.retrievePlaylists(),n.refreshPlaylist(t),n.clearMarked(e)},function(t){return n.failure(e,t.error)})},n.moveAll=function(e,t){var i=n.getVisibleIds(e),s=i.playlistItemIds,a=i.videoIds;n.mark(e,s),y(s,a,n.state.lists[t].playlistId,function(t){n.progress(e,t),n.removeFromPlaylistState(e,[t.playlistItemId])},function(){n.retrievePlaylists(),n.refreshPlaylist(t),n.clearMarked(e)},function(t){return n.failure(e,t.error)})},n.remove=function(e,t,i){n.mark(e,t),g([t],[i],n.state.lists[e].playlistId,function(t){return n.progress(e,t)},function(){n.removeFromPlaylistState(e,[t]),n.clearMarked(e)},function(t){return n.failure(e,t.error)})},n.removeAll=function(e){var t=n.getVisibleIds(e),i=t.playlistItemIds,s=t.videoIds;n.mark(e,i),g(i,s,n.state.lists[e].playlistId,function(t){return n.progress(e,t)},function(){n.removeFromPlaylistState(e,i),n.clearMarked(e)},function(t){return n.failure(e,t.error)})},n.updateFilter=function(e,t){var i=e.target.value;n.setState(Object(O.a)(function(e){for(var n=0;n<e.lists.length;n++)(e.sync||n===t)&&(e.lists[n].errorMessage=null,e.lists[n].filter=i)}))},n.clearFilter=function(e){n.setState(Object(O.a)(function(t){t.lists[e].filter=""}))},n.refresh=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n.state.isAuthorized&&n.setState(Object(O.a)(function(e){e.videosLoading=!1,e.playlists=null;for(var n=0;n<e.lists;n++)e.lists[n]={playlistId:null,videos:[],filter:t?"":e.lists[n].filter,errorMessage:null}}),function(){return n.retrievePlaylists()})},n.dismissErrorMessage=function(e){n.setState(Object(O.a)(function(t){t.lists[e].errorMessage=null}))},n.toggleSync=function(){n.setState({sync:!n.state.sync})},n.state={isAuthorized:!1,videosLoading:!1,playlists:null,sync:!1,lists:[{playlistId:null,videos:[],filter:"",sortMethod:T,sortDirection:_,errorMessage:null,marked:[]},{playlistId:null,videos:[],filter:"",sortMethod:T,sortDirection:_,errorMessage:null,marked:[]}]},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"componentDidUpdate",value:function(e,t){this.state.isAuthorized&&null===this.state.playlists&&this.retrievePlaylists()}},{key:"render",value:function(){var e=this,t=this.state,n=t.isAuthorized,a=t.playlists,o=t.lists,r=t.sortDirection,l=t.sync;return n?s.a.createElement("div",{className:"lists"},o.map(function(t,n){var c=o[n].sortMethod,u=t.filter.toLowerCase(),d=t.videos.filter(function(e){return e.snippet.title.toLowerCase().indexOf(u)>-1}).sort(e.getSortFunction(n));return s.a.createElement("div",{className:"videos",key:n},a&&s.a.createElement("div",{className:"playlist-selector"},s.a.createElement("select",{onChange:function(t){return e.setPlaylist(t,n)}},s.a.createElement("option",{defaultValue:t.playlistId},"select playlist..."),a.map(function(e,t){return s.a.createElement("option",{key:t,value:e.id},e.snippet.title)}))," ",s.a.createElement("button",{onClick:e.refreshPlaylists},"refresh")," ",t.playlistId&&s.a.createElement("a",{href:"https://www.youtube.com/playlist?list=".concat(t.playlistId),target:"_blank",rel:"noopener noreferrer"},"open in YouTube")),t.errorMessage&&s.a.createElement("div",{className:"messages"},s.a.createElement("div",{className:"error"},t.errorMessage,s.a.createElement("div",{className:"dismiss"},s.a.createElement("button",{onClick:function(){return e.dismissErrorMessage(n)}},"dismiss")))),t.videos&&t.videos.length>0&&s.a.createElement(i.Fragment,null,s.a.createElement("div",{className:"infos"},"There are ",t.videos.length," videos in this playlist.",s.a.createElement("button",{onClick:function(){return e.refreshPlaylist(n)}},"refresh the list of videos")),s.a.createElement("div",{className:"filtering"},0===n&&s.a.createElement("div",{className:"sync"},s.a.createElement("button",{onClick:e.toggleSync},"sync filter&sorting: ",l?"ON":"OFF")),s.a.createElement("div",{className:"filter"},"Filter: ",s.a.createElement("input",{type:"text",value:t.filter,onChange:function(t){return e.updateFilter(t,n)}}),s.a.createElement("button",{onClick:function(){return e.clearFilter(n)}},"clear filter"),d.length," videos shown")),d.length>0&&s.a.createElement("div",null,n%2?s.a.createElement("div",{className:"batch-actions"},"Apply to all videos shown below:",s.a.createElement("button",{title:"remove shown videos from the playlist",onClick:function(){return e.removeAll(n)}},s.a.createElement("i",{className:"fas fa-trash-alt"})," remove all"),s.a.createElement("button",{onClick:function(){return e.copyAll(n,n-1)}},s.a.createElement("i",{className:"fas fa-angle-double-left"})," copy all"),s.a.createElement("button",{onClick:function(){return e.moveAll(n,n-1)}},s.a.createElement("i",{className:"fas fa-angle-left"})," move all")):s.a.createElement("div",{className:"batch-actions"},"Apply to all videos shown below:",s.a.createElement("button",{title:"remove shown videos from the playlist",onClick:function(){return e.removeAll(n)}},s.a.createElement("i",{className:"fas fa-trash-alt"})," remove all"),s.a.createElement("button",{onClick:function(){return e.copyAll(n,n+1)}},"copy all ",s.a.createElement("i",{className:"fas fa-angle-double-right"})),s.a.createElement("button",{onClick:function(){return e.moveAll(n,n+1)}},"move all ",s.a.createElement("i",{className:"fas fa-angle-right"})))),s.a.createElement("div",{className:"sorting"},s.a.createElement("button",{onClick:function(){return e.setSortMethod(n,T)},className:c===T?"text-button active":"text-button"},"title",s.a.createElement("i",{className:r?"fas fa-sort-alpha-down":"fas fa-sort-alpha-up"})),s.a.createElement("button",{onClick:function(){return e.setSortMethod(n,V)},className:c===V?"text-button active":"text-button"},"added to playlist",s.a.createElement("i",{className:r?"fas fa-sort-numeric-down":"fas fa-sort-numeric-up"})),s.a.createElement("button",{onClick:function(){return e.setSortMethod(n,U)},className:c===U?"text-button active":"text-button"},"video created",s.a.createElement("i",{className:r?"fas fa-sort-numeric-down":"fas fa-sort-numeric-up"})),s.a.createElement("button",{onClick:function(){return e.setSortMethod(n,R)},className:c===R?"text-button active":"text-button"},"position",s.a.createElement("i",{className:r?"fas fa-sort-numeric-down":"fas fa-sort-numeric-up"}))),s.a.createElement("div",{className:"rows"},d.map(function(i,a){var o=t.marked.includes(i.id)?"marked":"";return s.a.createElement("div",{key:a,className:"row row-".concat(a%2," ").concat(o)},n%2?s.a.createElement("div",null,s.a.createElement("button",{className:"action-button",onClick:function(){return e.move(n,n-1,i.id,i.contentDetails.videoId)}},s.a.createElement("i",{className:"fas fa-angle-left"})," move"),s.a.createElement("button",{className:"action-button",onClick:function(){return e.copy(n,n-1,i.id,i.contentDetails.videoId)}},s.a.createElement("i",{className:"fas fa-angle-double-left"})," copy")):s.a.createElement("div",null,s.a.createElement("button",{className:"action-button",title:"remove from this playlist",onClick:function(){return e.remove(n,i.id,i.contentDetails.videoId)}},s.a.createElement("i",{className:"fas fa-trash-alt"}))),s.a.createElement("div",{className:"video-title"},s.a.createElement("a",{href:"https://www.youtube.com/watch?v=".concat(i.contentDetails.videoId),target:"_blank",rel:"noopener noreferrer"},i.snippet.title)),n%2?s.a.createElement("div",null,s.a.createElement("button",{className:"action-button",title:"remove from this playlist",onClick:function(){return e.remove(n,i.id,i.contentDetails.videoId)}},s.a.createElement("i",{className:"fas fa-trash-alt"}))):s.a.createElement("div",null,s.a.createElement("button",{className:"action-button",onClick:function(){return e.copy(n,n+1,i.id,i.contentDetails.videoId)}},"copy ",s.a.createElement("i",{className:"fas fa-angle-double-right"})),s.a.createElement("button",{className:"action-button",onClick:function(){return e.move(n,n+1,i.id,i.contentDetails.videoId)}},"move ",s.a.createElement("i",{className:"fas fa-angle-right"}))))}))))})):s.a.createElement("div",null)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.isAuthorized!==t.isAuthorized?{isAuthorized:e.isAuthorized}:null}}]),t}(i.Component),G=(n(38),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).store=function(e,t){if(e){var i=e.items;i.sort(N),n.setState(Object(O.a)(function(e){e.subscriptions=void 0!==t&&t?[].concat(Object(w.a)(e.subscriptions),Object(w.a)(i)):i})),e.nextPageToken&&n.retrieve(e.nextPageToken)}},n.retrieve=function(e){v(p("GET","/youtube/v3/subscriptions",{mine:"true",part:"snippet,contentDetails",maxResults:50,pageToken:e}),function(t){return n.store(t,e)})},n.storeChannelPlaylist=function(e,t){var i=t.items;i.sort(N),n.setState(Object(O.a)(function(t){t.subscriptionsPlaylists[e]=i}))},n.retrieveChannelPlaylists=function(e){v(function(e,t){return p("GET","/youtube/v3/playlists",{channelId:e,part:"snippet,contentDetails",maxResults:"50",pageToken:t})}(e),function(t){return n.storeChannelPlaylist(e,t)})},n.updateFilter=function(e){27===e.keyCode?n.setState({filter:""}):n.setState({filter:e.target.value})},n.clearFilter=function(){n.setState({filter:""})},n.refresh=function(){n.retrieve()},n.state={isAuthorized:!1,subscriptions:null,subscriptionsPlaylists:{},filter:""},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){this.state.isAuthorized&&null===this.state.subscriptions&&this.retrieve()}},{key:"componentDidMount",value:function(){this.retrieve()}},{key:"render",value:function(){var e=this,t=this.state,n=t.isAuthorized,a=t.subscriptions,o=t.subscriptionsPlaylists,r=t.filter.toLowerCase();return n?a?s.a.createElement("div",null,s.a.createElement("h2",null,"list of subscriptions"),s.a.createElement("h3",null,a.length," subscriptions"),s.a.createElement("button",{onClick:this.refresh},"refresh"),s.a.createElement("div",{className:"filter"},"filter:"," ",s.a.createElement("input",{type:"text",onKeyUp:this.updateFilter}),s.a.createElement("button",{onClick:this.clearFilter},"clear filter")),s.a.createElement("div",{className:"subscriptions-list"},a.filter(function(e){return e.snippet.title.toLowerCase().indexOf(r)>-1||e.snippet.description.toLowerCase().indexOf(r)>-1}).map(function(t,n){var a=t.snippet.resourceId.channelId;return s.a.createElement(i.Fragment,{key:n},s.a.createElement("div",null,s.a.createElement(b.a,{to:"/videos/".concat(t.id)},t.snippet.title),s.a.createElement("a",{href:"https://www.youtube.com/channel/".concat(a),target:"_blank",rel:"noopener noreferrer"},"open")),s.a.createElement("div",null,t.snippet.description," ",s.a.createElement("button",{onClick:function(){return e.retrieveChannelPlaylists(a)}},"show playlists"),o[a]&&s.a.createElement("div",{className:"channel-playlists"},o[a].map(function(e,t){return s.a.createElement("a",{key:t,href:"https://www.youtube.com/playlist?list=".concat(e.id),target:"_blank",rel:"noopener noreferrer"},e.snippet.title," (",e.contentDetails.itemCount,")")}))))}))):s.a.createElement("div",null,"Retrieving the subscriptions..."):s.a.createElement("div",null)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.isAuthorized!==t.isAuthorized?{isAuthorized:e.isAuthorized}:null}}]),t}(i.Component)),W=function(e){function t(){var e,n;Object(r.a)(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={google_api:null,user:null,isAuthorized:!1},n.setSigninStatus=function(){if(console.log("setSigninStatus",n.state.google_api),n.state.google_api){var e=n.state.google_api.currentUser.get(),t=e.hasGrantedScopes("https://www.googleapis.com/auth/youtube.force-ssl https://www.googleapis.com/auth/youtubepartner");n.setState({user:e,isAuthorized:t})}},n.updateSigninStatus=function(){n.setSigninStatus()},n.initClient=function(){console.log("initClient"),window.gapi.client.init({clientId:"1035406715321-fu4ktringpl82201dm2g9fm674akd203.apps.googleusercontent.com",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/youtube/v3/rest"],scope:"https://www.googleapis.com/auth/youtube.force-ssl https://www.googleapis.com/auth/youtubepartner"}).then(function(){console.log("initClient: success");var e=window.gapi.auth2.getAuthInstance();e.isSignedIn.listen(n.updateSigninStatus),n.setSigninStatus(),n.setState({google_api:e})}).catch(function(e){console.warn("initClient: auth error: ",e)})},n.authorize=function(){console.log("authorize"),window.gapi.auth2.getAuthInstance().grantOfflineAccess().then(function(e){e.code}),n.state.google_api.signIn().then(function(e){var t=e.getBasicProfile(),i=e.hasGrantedScopes("https://www.googleapis.com/auth/youtube.force-ssl https://www.googleapis.com/auth/youtubepartner");n.setState({user:e,userProfile:t,isAuthorized:i})})},n.grantAccess=function(){window.gapi.auth2.getAuthInstance().grantOfflineAccess({prompt:"consent"}).then(function(e){console.log("grantOfflineAccess",e);e.code})},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window.gapi.load("client:auth2",this.initClient)}},{key:"render",value:function(){var e=this.state,t=e.isAuthorized,n=e.userProfile;return s.a.createElement(P.a,null,s.a.createElement("div",null,s.a.createElement("div",{className:"header"},"Youtube Playlist Editor",s.a.createElement("button",{onClick:this.grantAccess},"Grant access"),t?s.a.createElement("div",{className:"header-info"},"Authorized for ",n.getName()):s.a.createElement("span",null,s.a.createElement("button",{onClick:this.authorize},"Authorize")),t&&s.a.createElement(b.a,{className:"header-link",to:"/channels"},"Channels"),t&&s.a.createElement(b.a,{className:"header-link",to:"/playlists"},"Playlists"),t&&s.a.createElement(b.a,{className:"header-link",to:"/subscriptions"},"Subscriptions"),t&&s.a.createElement(b.a,{className:"header-link",to:"/videos2"},"Videos")),s.a.createElement("div",{className:"content"},!t&&s.a.createElement("div",null,s.a.createElement("p",null,"You need to authorize the application to access your Youtube playlists."),s.a.createElement("p",null,"Click the"," ",s.a.createElement("button",{onClick:this.authorize},"Authorize")," ","button to allow the access.")),s.a.createElement(C.a,null,s.a.createElement(S.a,{path:"/channels",render:function(e){return s.a.createElement(A,Object.assign({},e,{isAuthorized:t}))}}),s.a.createElement(S.a,{path:"/subscriptions",render:function(e){return s.a.createElement(G,Object.assign({},e,{isAuthorized:t}))}}),s.a.createElement(S.a,{path:"/playlists",render:function(e){return s.a.createElement(E,Object.assign({},e,{isAuthorized:t}))}}),s.a.createElement(S.a,{path:"/videos/:playlistid",render:function(e){return s.a.createElement(I,Object.assign({},e,{isAuthorized:t}))}}),s.a.createElement(S.a,{path:"/videos2",render:function(e){return s.a.createElement(q,Object.assign({},e,{isAuthorized:t}))}})))))}}]),t}(i.Component),B=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function K(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}function Y(){}console.log=Y,console.warn=Y,console.error=Y,o.a.render(s.a.createElement(W,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/youtube-playlist-editor",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/youtube-playlist-editor","/service-worker.js");B?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):K(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):K(e)})}}()}},[[20,2,1]]]);
//# sourceMappingURL=main.152a55d1.chunk.js.map