(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,n){},27:function(e,t,n){e.exports=n(42)},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),s=n(24),r=n.n(s),o=(n(32),n(4)),l=n(5),c=n(7),u=n(6),d=n(8),f=(n(33),n(2));function p(e,t,n,i){if(void 0===window.gapi.client||null===window.gapi.client)return console.log("buildApiRequest window.gapi.client is undefined or null"),null;var a;if(n=function(e){for(var t in e)!e.hasOwnProperty(t)||e[t]&&"undefined"!==e[t]||delete e[t];return e}(n),i){var s=function(e){var t={},n=e;for(var i in e){var a=e[i];if(i&&"[]"===i.substr(-2,2)){var s=i.replace("[]","");a&&(n[s]=a.split(",")),delete n[i]}}for(var r in n)if(n.hasOwnProperty(r)&&n[r])for(var o=r.split("."),l=t,c=0;c<o.length;c++){var u=o[c];c===o.length-1?l[u]=n[r]:l=l[u]=l[u]||{}}return t}(i);a=window.gapi.client.request({body:s,method:e,path:t,params:n})}else a=window.gapi.client.request({method:e,path:t,params:n});return console.log(a),a}function m(e){return p("GET","/youtube/v3/playlists",{mine:"true",part:"snippet,contentDetails",maxResults:"50",pageToken:e})}function v(e,t){return p("GET","/youtube/v3/playlistItems",{maxResults:"50",part:"snippet,contentDetails",playlistId:e,pageToken:t})}function h(e,t,n){void 0!==e&&null!==e?e.then(function(e){console.log(e),t&&t(e.result)}).catch(function(e){n&&n(e)}):console.log("executeRequest request is undefined or null")}function y(e,t,n,i,a,s){if(n){for(var r=[],o=0;o<t.length;o++)r.push(p("POST","/youtube/v3/playlistItems",{part:"snippet"},{"snippet.playlistId":n,"snippet.resourceId.kind":"youtube#video","snippet.resourceId.videoId":t[o]}));for(var l=Promise.resolve(),c=r.length,u=function(n){l=l.then(function(){i&&i({index:n+1,total:c,operation:"copying",videoId:"".concat(t[n]),playlistItemId:"".concat(e[n])})}).then(function(){return r[n]}).then(function(){i&&i({index:n+1,total:c,operation:"copied",videoId:"".concat(t[n]),playlistItemId:"".concat(e[n])})})},d=0;d<c;d++)u(d);l.then(function(){a&&a()}).catch(function(e){s&&s({error:e.result.error})})}}function g(e,t,n,i,a,s){if(n){for(var r=[],o=0;o<t.length;o++)r.push(p("POST","/youtube/v3/playlistItems",{part:"snippet"},{"snippet.playlistId":n,"snippet.resourceId.kind":"youtube#video","snippet.resourceId.videoId":t[o]}));for(var l=[],c=0;c<e.length;c++)l.push(p("DELETE","/youtube/v3/playlistItems",{id:e[c]}));for(var u=Promise.resolve(),d=r.length,f=function(n){u=u.then(function(){i&&i({index:n+1,total:d,operation:"inserting",videoId:"".concat(t[n]),playlistItemId:"".concat(e[n])})}).then(function(){return r[n]}).then(function(){i&&i({index:n+1,total:d,operation:"removing",videoId:"".concat(t[n]),playlistItemId:"".concat(e[n])})}).then(function(){return l[n]}).then(function(){i&&i({index:n+1,total:d,operation:"removed",videoId:"".concat(t[n]),playlistItemId:"".concat(e[n])})})},m=0;m<d;m++)f(m);u.then(function(e){a()}).catch(function(e){s&&s({error:e.result.error})})}}function b(e,t,n,i,a,s){if(n){for(var r=[],o=0;o<e.length;o++)r.push(p("DELETE","/youtube/v3/playlistItems",{id:e[o]}));for(var l=r.length,c=Promise.resolve(),u=function(n){c=c.then(function(){i&&i({index:n+1,total:l,operation:"removing",videoId:"".concat(t[n]),playlistItemId:"".concat(e[n])})}).then(function(){return r[n]}).then(function(){i&&i({index:n+1,total:l,operation:"removed",videoId:"".concat(t[n]),playlistItemId:"".concat(e[n])})})},d=0;d<l;d++)u(d);c.then(function(e){a()}).catch(function(e){s&&s({error:e.result.error})})}}var E=n(9),w=(n(34),"snippetTitle"),k="snippetPublishedAt",S="snippetPosition",I="videoPublishedAt",P=!0;function N(e,t){return e.snippet.title.toLowerCase()>t.snippet.title.toLowerCase()?1:t.snippet.title.toLowerCase()>e.snippet.title.toLowerCase()?-1:0}function C(e,t){var n=Date.parse(e.snippet.publishedAt),i=Date.parse(t.snippet.publishedAt);return n>i?1:i>n?-1:0}function A(e,t){return e.snippet.position>t.snippet.position?1:t.snippet.position>e.snippet.position?-1:0}function O(e,t){var n=Date.parse(e.contentDetails.publishedAt),i=Date.parse(t.contentDetails.publishedAt);return n>i?1:i>n?-1:0}function D(e,t){return t.snippet.title.toLowerCase()>e.snippet.title.toLowerCase()?1:e.snippet.title.toLowerCase()>t.snippet.title.toLowerCase()?-1:0}function j(e,t){var n=Date.parse(t.snippet.publishedAt),i=Date.parse(e.snippet.publishedAt);return n>i?1:i>n?-1:0}function x(e,t){return t.snippet.position>e.snippet.position?1:e.snippet.position>t.snippet.position?-1:0}function z(e,t){var n=Date.parse(t.contentDetails.publishedAt),i=Date.parse(e.contentDetails.publishedAt);return n>i?1:i>n?-1:0}var M=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).newPlaylistName=function(e){n.setState({newPlaylist:e.target.value})},n.createPlaylist=function(){n.state.newPlaylist&&h(p("POST","/youtube/v3/playlists",{part:"snippet,status",onBehalfOfContentOwner:""},{"snippet.title":n.state.newPlaylist,"snippet.description":"","snippet.tags[]":"","snippet.defaultLanguage":"","status.privacyStatus":"private"}),function(e){n.retrieve()},n.createError)},n.store=function(e,t){if(e){var i=e.items;i.sort(N),void 0!==t&&t?n.setState(function(e){return{playlists:[].concat(Object(f.a)(e.playlists),Object(f.a)(i))}}):n.setState({playlists:i}),e.nextPageToken&&n.retrieve(e.nextPageToken)}},n.retrieve=function(e){h(m(e),function(t){return n.store(t,e)})},n.updateFilter=function(e){27===e.keyCode?n.setState({filter:""}):n.setState({filter:e.target.value})},n.refresh=function(){n.retrieve()},n.state={isAuthorized:!1,playlists:null,newPlaylist:"",filter:""},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){this.state.isAuthorized&&null===this.state.playlists&&this.retrieve()}},{key:"componentDidMount",value:function(){this.state.isAuthorized&&this.retrieve()}},{key:"render",value:function(){var e=this.state,t=e.isAuthorized,n=e.playlists,i=e.newPlaylist,s=e.filter;return t?n?a.a.createElement("div",null,a.a.createElement("h2",null,"list of playlists"),a.a.createElement("button",{onClick:this.refresh},"refresh"),a.a.createElement("h3",null,n.length," playlists"),a.a.createElement("div",null,"new playlist:"," ",a.a.createElement("input",{type:"text",value:i,onChange:this.newPlaylistName})," ",a.a.createElement("button",{onClick:this.createPlaylist},"create")),a.a.createElement("div",{className:"filter"},"filter:"," ",a.a.createElement("input",{type:"text",onKeyUp:this.updateFilter})),a.a.createElement("div",null,n.filter(function(e){return e.snippet.title.toLowerCase().indexOf(s.toLowerCase())>-1}).map(function(e,t){return a.a.createElement("div",{key:t},a.a.createElement(E.b,{to:"/videos/".concat(e.id)},e.snippet.title," (",e.contentDetails.itemCount," ","videos)"))}))):a.a.createElement("div",null,"Retrieving the playlists..."):null}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.isAuthorized!==t.isAuthorized?{isAuthorized:e.isAuthorized}:null}}]),t}(i.Component),F=n(16),L=(n(23),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).storePlaylists=function(e){if(e){var t=e.items;t.sort(N),n.setState({playlists:t})}},n.storeVideos=function(e,t){if(e){var i=e.items;i.sort(N),void 0!==t&&t?n.setState(function(e){return{videos:[].concat(Object(f.a)(e.videos),Object(f.a)(i))}}):n.setState({videos:i}),e.nextPageToken&&n.retrieveVideos(e.nextPageToken)}},n.updatePlaylistName=function(e){n.setState({playlistName:e})},n.retrievePlaylistName=function(){if(n.state.playlistId){var e=p("GET","/youtube/v3/playlists",{id:n.state.playlistId,part:"snippet,contentDetails"});e?e.then(function(e){try{this.updatePlaylistName(e.result.items[0].snippet.title)}catch(t){t instanceof TypeError?console.log("buildPlaylistNameRequest incomplete response",t):console.error("buildPlaylistNameRequest unexpected error",t)}},function(){console.warn("buildPlaylistNameRequest rejected")},Object(F.a)(n)):console.warn("req is null")}},n.retrieveVideos=function(e){n.setState({videosLoading:!0}),h(v(n.state.playlistId,e),function(t){return n.storeVideos(t,e)})},n.retrievePlaylists=function(){h(m(),n.storePlaylists)},n.removeFromPlaylistState=function(e){var t=n.state.videos,i=t.findIndex(function(t){return t.id===e});t.splice(i,1),n.setState({videos:t})},n.removeError=function(e){console.log("Videos.removeError",e.code,e.message)},n.remove=function(e){e&&h(p("DELETE","/youtube/v3/playlistItems",{id:e}),function(){return n.removeFromPlaylistState(e)},n.removeError)},n.createError=function(e){console.log("Videos.insertError",e)},n.insertError=function(e){console.log("Videos.insertError",e)},n.move=function(e,t,n){},n.moveSuccess=function(e){var t=e.operation,i=(e.data,e.videoId,e.videoItemId);switch(t){case"insert":break;case"delete":n.removeFromPlaylistState(i);break;default:console.error("moveSuccess: unknown operation ".concat(t))}},n.moveFailure=function(e){console.log("moveFailure",e)},n.moveVisible=function(){var e=[],t=[];n.state.videos.filter(function(e){return e.snippet.title.toLowerCase().indexOf(n.state.filter.toLowerCase())>-1}).forEach(function(n){e.push(n.id),t.includes(n.contentDetails.videoId)||t.push(n.contentDetails.videoId)}),g(e,t,n.state.moveToPlaylistId,n.moveSuccess,n.moveFailure)},n.setMoveToList=function(e){n.setState({moveToPlaylistId:e.target.value})},n.updateFilter=function(e){var t=e.target.value;n.setState({filter:t})},n.refresh=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n.state.isAuthorized&&(n.setState({playlistName:null,videos:null,playlists:null,videosLoading:!1,filter:e?"":n.state.filter}),n.retrievePlaylistName(),n.retrieveVideos(),n.retrievePlaylists())},n.state={isAuthorized:!1,playlistName:null,playlistId:e.match.params.playlistid,videos:null,playlists:null,moveToPlaylistId:null,filter:"",videosLoading:!1},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.state.isAuthorized&&this.refresh()}},{key:"componentDidUpdate",value:function(e,t){this.state.isAuthorized&&(null===this.state.playlistName&&this.retrievePlaylistName(),!this.state.videosLoading&&this.state.playlistId&&null===this.state.videos&&this.retrieveVideos(),null===this.state.playlists&&this.retrievePlaylists())}},{key:"render",value:function(){var e=this,t=this.state,n=t.isAuthorized,i=t.playlistId,s=t.playlistName,r=t.videos,o=t.playlists,l=t.moveToPlaylistId,c=t.filter;if(n){if(r){var u=r.filter(function(e){return e.snippet.title.toLowerCase().indexOf(c.toLowerCase())>-1});return u.sort(N),a.a.createElement("div",{className:"videos"},a.a.createElement("h2",null,"Videos in ",s," :"),a.a.createElement("h3",null,r.length," videos"),a.a.createElement("button",{onClick:this.refresh},"refresh"),a.a.createElement("div",{className:"playlist-selector"},"target playlist:",o&&a.a.createElement("select",{onChange:this.setMoveToList},a.a.createElement("option",{value:""},"select list to move to"),o.map(function(e,t){return e.id===i?null:a.a.createElement("option",{key:t,value:e.id},e.snippet.title)}))),l&&a.a.createElement("div",null,a.a.createElement("button",{onClick:this.moveVisible},"move visible to target playlist")),a.a.createElement("div",{className:"filter"},"filter: ",a.a.createElement("input",{type:"text",value:c,onChange:this.updateFilter})),a.a.createElement("div",null,u.map(function(t,n){return a.a.createElement("div",{key:n},a.a.createElement("a",{href:"https://www.youtube.com/watch?v=".concat(t.contentDetails.videoId),target:"_blank",rel:"noopener noreferrer"},t.snippet.title)," ",a.a.createElement("button",{onClick:function(){return e.remove(t.id)}},"remove"),l&&a.a.createElement("button",{onClick:function(){return e.move(t.id,t.contentDetails.videoId,l)}},"move"))})))}return a.a.createElement("div",null,"Retrieving the list of videos...")}return null}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.isAuthorized!==t.isAuthorized?{isAuthorized:e.isAuthorized}:null}}]),t}(i.Component)),V=n(13),T=(n(39),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).store=function(e){e&&n.setState({channels:e.items[0].contentDetails.relatedPlaylists})},n.retrieve=function(e){h(p("GET","/youtube/v3/channels",{mine:"true",part:"contentDetails"}),n.store)},n.state={isAuthorized:!1,channels:null},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){this.state.isAuthorized&&null===this.state.channels&&this.retrieve()}},{key:"componentDidMount",value:function(){this.state.isAuthorized&&this.retrieve()}},{key:"render",value:function(){var e=this.state,t=e.isAuthorized,n=e.channels;return t?n?a.a.createElement("div",null,a.a.createElement("h2",null,"list of channels"),a.a.createElement("div",null,Object.keys(n).map(function(e,t){return a.a.createElement("div",{key:t},a.a.createElement(E.b,{to:"/videos/".concat(n[e])},e))}))):a.a.createElement("div",null,"Retrieving the channels..."):null}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.isAuthorized!==t.isAuthorized?{isAuthorized:e.isAuthorized}:null}}]),t}(i.Component)),R=(n(40),n(1)),U=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).store=function(e,t){if(e){var i=e.items;i.sort(N),n.setState(Object(R.a)(function(e){e.subscriptions=void 0!==t&&t?[].concat(Object(f.a)(e.subscriptions),Object(f.a)(i)):i})),e.nextPageToken&&n.retrieve(e.nextPageToken)}},n.retrieve=function(e){h(p("GET","/youtube/v3/subscriptions",{mine:"true",part:"snippet,contentDetails",maxResults:50,pageToken:e}),function(t){return n.store(t,e)})},n.storeChannelPlaylist=function(e,t){var i=t.items;i.sort(N),n.setState(Object(R.a)(function(t){t.subscriptionsPlaylists[e]=i}))},n.retrieveChannelPlaylists=function(e){h(function(e,t){return p("GET","/youtube/v3/playlists",{channelId:e,part:"snippet,contentDetails",maxResults:"50",pageToken:t})}(e),function(t){return n.storeChannelPlaylist(e,t)})},n.updateFilter=function(e){27===e.keyCode?n.setState({filter:""}):n.setState({filter:e.target.value})},n.clearFilter=function(){n.setState({filter:""})},n.refresh=function(){n.retrieve()},n.state={isAuthorized:!1,subscriptions:null,subscriptionsPlaylists:{},filter:""},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){this.state.isAuthorized&&null===this.state.subscriptions&&this.retrieve()}},{key:"componentDidMount",value:function(){this.state.isAuthorized&&this.retrieve()}},{key:"render",value:function(){var e=this,t=this.state,n=t.isAuthorized,s=t.subscriptions,r=t.subscriptionsPlaylists,o=t.filter.toLowerCase();return n?s?a.a.createElement("div",null,a.a.createElement("h2",null,"list of subscriptions"),a.a.createElement("h3",null,s.length," subscriptions"),a.a.createElement("button",{onClick:this.refresh},"refresh"),a.a.createElement("div",{className:"filter"},"filter:"," ",a.a.createElement("input",{type:"text",onKeyUp:this.updateFilter}),a.a.createElement("button",{onClick:this.clearFilter},"clear filter")),a.a.createElement("div",{className:"subscriptions-list"},s.filter(function(e){return e.snippet.title.toLowerCase().indexOf(o)>-1||e.snippet.description.toLowerCase().indexOf(o)>-1}).map(function(t,n){var s=t.snippet.resourceId.channelId;return a.a.createElement(i.Fragment,{key:n},a.a.createElement("div",null,a.a.createElement("a",{href:"https://www.youtube.com/channel/".concat(s),target:"_blank",rel:"noopener noreferrer"}," ",a.a.createElement("i",{className:"fas fa-external-link-alt"})),a.a.createElement(E.b,{to:"/videos/".concat(t.id)},t.snippet.title)),a.a.createElement("div",null,t.snippet.description," ",a.a.createElement("button",{onClick:function(){return e.retrieveChannelPlaylists(s)}},"show playlists"),r[s]&&a.a.createElement("div",{className:"channel-playlists"},r[s].map(function(e,t){return a.a.createElement("a",{key:t,href:"https://www.youtube.com/playlist?list=".concat(e.id),target:"_blank",rel:"noopener noreferrer"},e.snippet.title," (",e.contentDetails.itemCount,")")}))))}))):a.a.createElement("div",null,"Retrieving the subscriptions..."):null}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.isAuthorized!==t.isAuthorized?{isAuthorized:e.isAuthorized}:null}}]),t}(i.Component),q=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).setPlaylistsSortMethod=function(e){n.setState(Object(R.a)(function(t){t.playlistsSortMethod===e?t.playlistsSortDirection=!t.playlistsSortDirection:t.playlistsSortMethod=e}))},n.getPlaylistsSortFunction=function(){var e=n.state.playlistsSortDirection;switch(n.state.playlistsSortMethod){case w:return e?N:D;case k:return e?C:j;case S:return e?A:x;case I:return e?O:z;default:return N}},n.setVideosSortMethod=function(e){n.setState(Object(R.a)(function(t){t.videosSortMethod===e?t.videosSortDirection=!t.videosSortDirection:t.videosSortMethod=e}))},n.getVideosSortFunction=function(){var e=n.state.videosSortDirection;switch(n.state.videosSortMethod){case w:return e?N:D;case k:return e?C:j;case S:return e?A:x;case I:return e?O:z;default:return N}},n.retrievePlaylists=function(e){h(m(e),function(t){return n.storePlaylists(t,e)})},n.storePlaylists=function(e,t){if(e){var i=e.items;i.sort(N),void 0!==t&&t?n.setState(function(e){return{playlists:[].concat(Object(f.a)(e.playlists),Object(f.a)(i))}}):n.setState({playlists:i}),e.nextPageToken&&n.retrievePlaylists(e.nextPageToken)}},n.retrieveVideos=function(e){h(v(n.state.playlistId,e),function(t){return n.storeVideos(t,e)})},n.refreshVideos=function(){n.setState({videos:[]},n.retrieveVideos)},n.storeVideos=function(e,t){if(e){var i=e.items;i.sort(N),void 0!==t&&t?n.setState(function(e){return{videos:[].concat(Object(f.a)(e.videos),Object(f.a)(i))}}):n.setState({videos:i}),e.nextPageToken&&n.retrieveVideos(e.nextPageToken)}},n.updatePlaylistsFilter=function(e){n.setState({playlistsFilter:27===e.keyCode?"":e.target.value})},n.clearPlaylistsFilter=function(){n.setState({playlistsFilter:""})},n.updateVideosFilter=function(e){n.setState({videosFilter:27===e.keyCode?"":e.target.value})},n.clearVideosFilter=function(){n.setState({videosFilter:""})},n.selectPlaylist=function(e){n.setState({playlistId:e},n.retrieveVideos)},n.state={isAuthorized:!1,playlists:null,playlistId:null,playlistsFilter:"",playlistsSortMethod:w,playlistsSortDirection:P,videos:[],videosFilter:"",videosSortMethod:w,videosSortDirection:P},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){this.state.isAuthorized&&null===this.state.playlists&&this.retrievePlaylists()}},{key:"componentDidMount",value:function(){this.state.isAuthorized&&this.retrievePlaylists()}},{key:"render",value:function(){var e=this,t=this.state,n=t.isAuthorized,i=t.playlistId,s=t.playlists,r=t.videos,o=t.playlistsFilter,l=t.videosFilter,c=t.playlistsSortMethod,u=t.videosSortMethod,d=t.playlistsSortDirection,f=t.videosSortDirection,p=o.toLowerCase(),m=s?s.filter(function(e){return e.snippet.title.toLowerCase().indexOf(p)>-1}).sort(this.getPlaylistsSortFunction()):[],v=l.toLowerCase(),h=r?r.filter(function(e){return e.snippet.title.toLowerCase().indexOf(v)>-1}).sort(this.getVideosSortFunction()):[];return n?s?a.a.createElement("div",{className:"two-columns-headers"},a.a.createElement("div",{className:"column-header"},a.a.createElement("div",null,a.a.createElement("span",{className:"strong"},"Playlists")," \u2022 ",s.length," playlists ",a.a.createElement("button",{onClick:function(){return e.retrievePlaylists()}},"refresh")),a.a.createElement("div",{className:"filter"},"filter: ",a.a.createElement("input",{type:"text",value:o,onChange:this.updatePlaylistsFilter})," ",a.a.createElement("button",{onClick:this.clearPlaylistsFilter},"clear filter")),a.a.createElement("div",{className:"sorting"},a.a.createElement("button",{onClick:function(){return e.setPlaylistsSortMethod(w)},className:c===w?"text-button active":"text-button"},"title",a.a.createElement("i",{className:d?"fas fa-sort-alpha-down":"fas fa-sort-alpha-up"})))),a.a.createElement("div",{className:"column-header"},a.a.createElement("div",null,a.a.createElement("span",{className:"strong"},"Videos")," \u2022 ",r.length," videos ",a.a.createElement("button",{onClick:this.refreshVideos},"refresh")),a.a.createElement("div",{className:"filter"},"filter: ",a.a.createElement("input",{type:"text",value:l,onChange:this.updateVideosFilter})," ",a.a.createElement("button",{onClick:this.clearVideosFilter},"clear filter")),a.a.createElement("div",{className:"sorting"},a.a.createElement("button",{onClick:function(){return e.setVideosSortMethod(w)},className:u===w?"text-button active":"text-button"},"title",a.a.createElement("i",{className:f?"fas fa-sort-alpha-down":"fas fa-sort-alpha-up"})),a.a.createElement("button",{onClick:function(){return e.setVideosSortMethod(k)},className:u===k?"text-button active":"text-button"},"added to playlist",a.a.createElement("i",{className:f?"fas fa-sort-numeric-down":"fas fa-sort-numeric-up"})),a.a.createElement("button",{onClick:function(){return e.setVideosSortMethod(I)},className:u===I?"text-button active":"text-button"},"video created",a.a.createElement("i",{className:f?"fas fa-sort-numeric-down":"fas fa-sort-numeric-up"})),a.a.createElement("button",{onClick:function(){return e.setVideosSortMethod(S)},className:u===S?"text-button active":"text-button"},"position",a.a.createElement("i",{className:f?"fas fa-sort-numeric-down":"fas fa-sort-numeric-up"})))),a.a.createElement("div",{className:"column-content"},m.map(function(t,n){return a.a.createElement("div",{key:n,className:"row clickable ".concat(t.id===i?"selected":""),onClick:function(){return e.selectPlaylist(t.id)}},a.a.createElement("div",{className:"row-main"},t.snippet.title," (",t.contentDetails.itemCount," "," videos)"),a.a.createElement("div",{className:"row-option"},a.a.createElement("a",{href:"https://www.youtube.com/playlist?list=".concat(t.id),target:"_blank",rel:"noopener noreferrer"},"open in YouTube ",a.a.createElement("i",{className:"fas fa-external-link-alt"}))))})),a.a.createElement("div",{className:"column-content"},null===i&&a.a.createElement("div",null,a.a.createElement("span",{className:"italic"},"Please select a playlist on the left")),null!==i&&0===h.length&&a.a.createElement("div",null,a.a.createElement("span",{className:"italic"},"Empty playlist")),h.map(function(e,t){return a.a.createElement("div",{key:t,className:"row"},a.a.createElement("a",{href:"https://www.youtube.com/watch?v=".concat(e.contentDetails.videoId),target:"_blank",rel:"noopener noreferrer"},e.snippet.title))}))):a.a.createElement("div",{className:"default-content"},"Retrieving the playlists..."):null}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.isAuthorized!==t.isAuthorized?{isAuthorized:e.isAuthorized}:null}}]),t}(i.Component),_=0,G=1,B=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).setSortMethod=function(e,t){n.setState(Object(R.a)(function(n){for(var i=0;i<n.lists.length;i++)(i===e||n.sync)&&(n.lists[i].sortMethod===t?n.lists[i].sortDirection=!n.lists[i].sortDirection:n.lists[i].sortMethod=t)}))},n.getSortFunction=function(e){var t=n.state.lists[e].sortDirection;switch(n.state.lists[e].sortMethod){case w:return t?N:D;case k:return t?C:j;case S:return t?A:x;case I:return t?O:z;default:return N}},n.storeVideos=function(e,t,i){if(t){var a=t.items;a.sort(N),n.setState(Object(R.a)(function(t){t.lists[e].videos=void 0!==i&&i?[].concat(Object(f.a)(t.lists[e].videos),Object(f.a)(a)):a})),t.nextPageToken&&n.retrieveVideos(e,t.nextPageToken)}},n.retrieveVideos=function(e,t){n.setState({errorMessage:null,videosLoading:!0}),h(v(n.state.lists[e].playlistId,t),function(i){return n.storeVideos(e,i,t)})},n.storePlaylists=function(e,t){if(e){var i=e.items;i.sort(N),n.setState(Object(R.a)(function(e){if(void 0!==t&&t){var n=[].concat(Object(f.a)(e.playlists),Object(f.a)(i));n.sort(N),e.playlists=n}else e.playlists=i})),e.nextPageToken&&n.retrievePlaylists(e.nextPageToken)}},n.retrievePlaylists=function(e){h(m(e),function(t){return n.storePlaylists(t,e)})},n.refreshPlaylists=function(){n.retrievePlaylists()},n.refreshPlaylist=function(e){n.setState(Object(R.a)(function(t){t.lists[e].errorMessage=null,t.lists[e].videos=[]}),function(){return n.retrieveVideos(e)})},n.setPlaylist=function(e,t){var i=e.target.value;n.setState(Object(R.a)(function(e){e.lists[t].errorMessage=null,e.lists[t].playlistId=i}),function(){return n.retrieveVideos(t)})},n.removeFromPlaylistState=function(e,t){n.setState(Object(R.a)(function(n){for(var i=n.lists[e].videos,a=function(e){var n=i.findIndex(function(n){return n.id===t[e]});n>=0&&i.splice(n,1)},s=0;s<t.length;s++)a(s);n.lists[e].videos=i,n.lists[e].errorMessage=null}))},n.inPlaylist=function(e,t){for(var i=n.state.lists[t].videos,a=0;a<i.length;a++)if(i[a].contentDetails.videoId===e)return!0;return!1},n.getVisibleIds=function(e){var t=n.state.lists[e].filter.toLowerCase(),i=[],a=[];return n.state.lists[e].videos.filter(function(e){return e.snippet.title.toLowerCase().indexOf(t)>-1}).forEach(function(e){i.push(e.id),a.includes(e.contentDetails.videoId)||a.push(e.contentDetails.videoId)}),{playlistItemIds:i,videoIds:a}},n.getVisibleAndUniqueIds=function(e,t){var i=n.state.lists[e].filter.toLowerCase(),a=[],s=[];return n.state.lists[e].videos.filter(function(e){return e.snippet.title.toLowerCase().indexOf(i)>-1}).forEach(function(e){n.inPlaylist(e.contentDetails.videoId,t)||(a.push(e.id),s.includes(e.contentDetails.videoId)||s.push(e.contentDetails.videoId))}),{playlistItemIds:a,videoIds:s}},n.mark=function(e,t){n.setState(Object(R.a)(function(n){n.lists[e].marked=Array.isArray(t)?t:[t]}))},n.clearMarked=function(e){n.setState(Object(R.a)(function(t){t.lists[e].progressMessage=null,t.lists[e].marked=[]}))},n.progress=function(e,t){var i=t.index,a=t.total,s=t.operation,r=t.videoId,o=t.playlistItemId;n.setState(Object(R.a)(function(t){t.lists[e].progressMessage="".concat(i,"/").concat(a,": ").concat(s," ").concat(r);var n=t.lists[e].marked.findIndex(function(e){return e===o});n>=0&&t.lists[e].marked.splice(n,1)}))},n.failure=function(e,t){n.setState(Object(R.a)(function(n){n.lists[e].errorMessage=t.message}))},n.copy=function(e,t,i,a){n.inPlaylist(a,t)||(n.mark(e,i),y([i],[a],n.state.lists[t].playlistId,function(t){return n.progress(e,t)},function(){n.retrievePlaylists(),n.refreshPlaylist(t)},function(t){return n.failure(e,t.error)}))},n.copyAll=function(e,t){var i=n.getVisibleAndUniqueIds(e,t),a=i.playlistItemIds,s=i.videoIds;0!==s.length&&(n.mark(e,a),y(a,s,n.state.lists[t].playlistId,function(t){return n.progress(e,t)},function(){n.retrievePlaylists(),n.refreshPlaylist(t),n.clearMarked(e)},function(t){return n.failure(e,t.error)}))},n.move=function(e,t,i,a){n.inPlaylist(a,t)||(n.mark(e,i),g([i],[a],n.state.lists[t].playlistId,function(t){n.progress(e,t),n.removeFromPlaylistState(e,[t.playlistItemId])},function(){n.retrievePlaylists(),n.refreshPlaylist(t),n.clearMarked(e)},function(t){return n.failure(e,t.error)}))},n.moveAll=function(e,t){var i=n.getVisibleAndUniqueIds(e,t),a=i.playlistItemIds,s=i.videoIds;0!==s.length&&(n.mark(e,a),g(a,s,n.state.lists[t].playlistId,function(t){n.progress(e,t),n.removeFromPlaylistState(e,[t.playlistItemId])},function(){n.retrievePlaylists(),n.refreshPlaylist(t),n.clearMarked(e)},function(t){return n.failure(e,t.error)}))},n.remove=function(e,t,i){n.mark(e,t),b([t],[i],n.state.lists[e].playlistId,function(t){return n.progress(e,t)},function(){n.removeFromPlaylistState(e,[t]),n.clearMarked(e)},function(t){return n.failure(e,t.error)})},n.removeAll=function(e){var t=n.getVisibleIds(e),i=t.playlistItemIds,a=t.videoIds;n.mark(e,i),b(i,a,n.state.lists[e].playlistId,function(t){return n.progress(e,t)},function(){n.removeFromPlaylistState(e,i),n.clearMarked(e)},function(t){return n.failure(e,t.error)})},n.updateFilter=function(e,t){var i=e.target.value;n.setState(Object(R.a)(function(e){for(var n=0;n<e.lists.length;n++)(e.sync||n===t)&&(e.lists[n].errorMessage=null,e.lists[n].filter=i)}))},n.clearFilter=function(e){n.setState(Object(R.a)(function(t){t.lists[e].filter=""}))},n.dismissErrorMessage=function(e){n.setState(Object(R.a)(function(t){t.lists[e].errorMessage=null}))},n.toggleSync=function(){n.setState({sync:!n.state.sync})},n.refresh=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n.state.isAuthorized&&n.setState(Object(R.a)(function(e){e.videosLoading=!1,e.playlists=null;for(var n=0;n<e.lists;n++)e.lists[n]={playlistId:null,videos:[],filter:t?"":e.lists[n].filter,errorMessage:null}}),function(){return n.retrievePlaylists()})},n.state={isAuthorized:!1,videosLoading:!1,playlists:null,sync:!1,lists:[{playlistId:null,videos:[],filter:"",sortMethod:w,sortDirection:P,errorMessage:null,progressMessage:null,marked:[]},{playlistId:null,videos:[],filter:"",sortMethod:w,sortDirection:P,errorMessage:null,progressMessage:null,marked:[]}]},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.state.isAuthorized&&this.refresh()}},{key:"componentDidUpdate",value:function(e,t){this.state.isAuthorized&&null===this.state.playlists&&this.retrievePlaylists()}},{key:"render",value:function(){var e=this,t=this.state,n=t.isAuthorized,s=t.playlists,r=t.lists,o=t.sync,l=[r[_].filter.toLowerCase(),r[G].filter.toLowerCase()],c=[r[_].videos.filter(function(e){return e.snippet.title.toLowerCase().indexOf(l[_])>-1}).sort(this.getSortFunction(_)),r[G].videos.filter(function(e){return e.snippet.title.toLowerCase().indexOf(l[G])>-1}).sort(this.getSortFunction(G))],u=c[_].length>0||c[G].length>0;return n?a.a.createElement("div",{className:u?"two-columns-headers big-height":"two-columns-headers short-height"},[_,G].map(function(t,n){var l=r[t].sortMethod,u=r[t].sortDirection;return a.a.createElement("div",{className:"column-header",key:n},s&&a.a.createElement("div",{className:"playlist-selector"},a.a.createElement("select",{onChange:function(n){return e.setPlaylist(n,t)}},a.a.createElement("option",{defaultValue:r[t].playlistId},"select playlist... (",s.length,")"),s.map(function(e,t){return a.a.createElement("option",{key:t,value:e.id},e.snippet.title," (",e.contentDetails.itemCount,")")}))," ",a.a.createElement("button",{onClick:e.refreshPlaylists},"refresh")," ",r[t].playlistId&&a.a.createElement("a",{href:"https://www.youtube.com/playlist?list=".concat(r[t].playlistId),target:"_blank",rel:"noopener noreferrer"},"open in YouTube")),r[t].errorMessage&&a.a.createElement("div",{className:"messages"},a.a.createElement("div",{className:"error"},r[t].errorMessage,a.a.createElement("div",{className:"dismiss"},a.a.createElement("button",{onClick:function(){return e.dismissErrorMessage(t)}},"dismiss")))),r[t].playlistId&&a.a.createElement("div",{className:"infos"},"There are ",r[t].videos.length," videos in this playlist.",r[t].videos.length>0&&a.a.createElement("button",{onClick:function(){return e.refreshPlaylist(t)}},"refresh the list of videos")),r[t].videos&&r[t].videos.length>0&&a.a.createElement(i.Fragment,null,a.a.createElement("div",{className:"filtering"},0===t&&a.a.createElement("div",{className:"sync"},a.a.createElement("button",{onClick:e.toggleSync},"sync filter&sorting: ",o?"ON":"OFF")),a.a.createElement("div",{className:"filter"},"Filter: ",a.a.createElement("input",{type:"text",value:r[t].filter,onChange:function(n){return e.updateFilter(n,t)}}),a.a.createElement("button",{onClick:function(){return e.clearFilter(t)}},"clear filter"),c[t].length," videos shown")),c[t].length>0&&a.a.createElement(i.Fragment,null,t%2?a.a.createElement("div",{className:"batch-actions"},"Apply to all videos shown below:",a.a.createElement("button",{title:"remove shown videos from the playlist",onClick:function(){return e.removeAll(t)}},a.a.createElement("i",{className:"fas fa-trash-alt"})," remove all"),a.a.createElement("button",{onClick:function(){return e.copyAll(t,t-1)}},a.a.createElement("i",{className:"fas fa-angle-double-left"})," copy all"),a.a.createElement("button",{onClick:function(){return e.moveAll(t,t-1)}},a.a.createElement("i",{className:"fas fa-angle-left"})," move all")):a.a.createElement("div",{className:"batch-actions"},"Apply to all videos shown below:",a.a.createElement("button",{title:"remove shown videos from the playlist",onClick:function(){return e.removeAll(t)}},a.a.createElement("i",{className:"fas fa-trash-alt"})," remove all"),a.a.createElement("button",{onClick:function(){return e.copyAll(t,t+1)}},"copy all ",a.a.createElement("i",{className:"fas fa-angle-double-right"})),a.a.createElement("button",{onClick:function(){return e.moveAll(t,t+1)}},"move all ",a.a.createElement("i",{className:"fas fa-angle-right"})))),a.a.createElement("div",{className:"sorting"},a.a.createElement("button",{onClick:function(){return e.setSortMethod(t,w)},className:l===w?"text-button active":"text-button"},"title",a.a.createElement("i",{className:u?"fas fa-sort-alpha-down":"fas fa-sort-alpha-up"})),a.a.createElement("button",{onClick:function(){return e.setSortMethod(t,k)},className:l===k?"text-button active":"text-button"},"added to playlist",a.a.createElement("i",{className:u?"fas fa-sort-numeric-down":"fas fa-sort-numeric-up"})),a.a.createElement("button",{onClick:function(){return e.setSortMethod(t,I)},className:l===I?"text-button active":"text-button"},"video created",a.a.createElement("i",{className:u?"fas fa-sort-numeric-down":"fas fa-sort-numeric-up"})),a.a.createElement("button",{onClick:function(){return e.setSortMethod(t,S)},className:l===S?"text-button active":"text-button"},"position",a.a.createElement("i",{className:u?"fas fa-sort-numeric-down":"fas fa-sort-numeric-up"})))))}),[_,G].map(function(t,n){var s=r[t];return a.a.createElement("div",{className:"column-content",key:n},r[t].progressMessage&&a.a.createElement("div",{className:"progress"},r[t].progressMessage),c[t]&&c[t].length>0&&a.a.createElement(i.Fragment,null,c[t].map(function(n,i){var r=s.marked.includes(n.id)?"marked":"";return a.a.createElement("div",{key:i,className:"row row-".concat(i%2," ").concat(r)},t%2?a.a.createElement("div",{className:"buttons"},a.a.createElement("button",{className:"action-button",onClick:function(){return e.move(t,t-1,n.id,n.contentDetails.videoId)}},a.a.createElement("i",{className:"fas fa-angle-left"})," move"),a.a.createElement("button",{className:"action-button space-around",onClick:function(){return e.copy(t,t-1,n.id,n.contentDetails.videoId)}},a.a.createElement("i",{className:"fas fa-angle-double-left"})," copy")):a.a.createElement("div",null,a.a.createElement("button",{className:"action-button remove-button",title:"remove from this playlist",onClick:function(){return e.remove(t,n.id,n.contentDetails.videoId)}},a.a.createElement("i",{className:"fas fa-trash-alt"}))),a.a.createElement("div",{className:t%2?"video-title space-right":"video-title space-left"},a.a.createElement("a",{href:"https://www.youtube.com/watch?v=".concat(n.contentDetails.videoId),target:"_blank",rel:"noopener noreferrer"},n.snippet.title)),t%2?a.a.createElement("div",null,a.a.createElement("button",{className:"action-button remove-button",title:"remove from this playlist",onClick:function(){return e.remove(t,n.id,n.contentDetails.videoId)}},a.a.createElement("i",{className:"fas fa-trash-alt"}))):a.a.createElement("div",{className:"buttons"},a.a.createElement("button",{className:"action-button space-around",onClick:function(){return e.copy(t,t+1,n.id,n.contentDetails.videoId)}},"copy ",a.a.createElement("i",{className:"fas fa-angle-double-right"})),a.a.createElement("button",{className:"action-button",onClick:function(){return e.move(t,t+1,n.id,n.contentDetails.videoId)}},"move ",a.a.createElement("i",{className:"fas fa-angle-right"}))))})))})):null}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.isAuthorized!==t.isAuthorized?{isAuthorized:e.isAuthorized}:null}}]),t}(i.Component),W=function(e){function t(){var e,n;Object(o.a)(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={google_api:null,user:null,isAuthorized:!1},n.setSigninStatus=function(){if(n.state.google_api){var e=n.state.google_api.currentUser.get(),t=e.hasGrantedScopes("https://www.googleapis.com/auth/youtube.force-ssl https://www.googleapis.com/auth/youtubepartner");n.setState({user:e,isAuthorized:t})}},n.updateSigninStatus=function(){n.setSigninStatus()},n.initClient=function(){window.gapi.client.init({clientId:"1035406715321-fu4ktringpl82201dm2g9fm674akd203.apps.googleusercontent.com",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/youtube/v3/rest"],scope:"https://www.googleapis.com/auth/youtube.force-ssl https://www.googleapis.com/auth/youtubepartner"}).then(function(){var e=window.gapi.auth2.getAuthInstance();e.isSignedIn.listen(n.updateSigninStatus),n.setSigninStatus(),n.setState({google_api:e})}).catch(function(e){console.warn("initClient: auth error: ",e)})},n.authorize=function(){window.gapi.auth2.getAuthInstance().grantOfflineAccess(),n.state.google_api.signIn().then(function(e){var t=e.getBasicProfile(),i=e.hasGrantedScopes("https://www.googleapis.com/auth/youtube.force-ssl https://www.googleapis.com/auth/youtubepartner");n.setState({user:e,userProfile:t,isAuthorized:i})})},n.grantAccess=function(){window.gapi.auth2.getAuthInstance().grantOfflineAccess()},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window.gapi.load("client:auth2",this.initClient)}},{key:"render",value:function(){var e=this.state,t=e.isAuthorized,n=e.userProfile;return a.a.createElement(E.a,null,a.a.createElement("div",{className:"App"},a.a.createElement("div",{className:"header"},"Youtube Playlist Editor",t&&a.a.createElement("div",{className:"header-info"},"Authorized for ",n.getName()),t&&a.a.createElement(E.b,{className:"header-link",to:"/browse-playlists"},"Browse playlists"),t&&a.a.createElement(E.b,{className:"header-link",to:"/move-videos"},"Move videos"),t&&a.a.createElement(E.b,{className:"header-link",to:"/playlists"},"Playlists"),t&&a.a.createElement(E.b,{className:"header-link",to:"/subscriptions"},"Subscriptions"),t&&a.a.createElement(E.b,{className:"header-link",to:"/channels"},"Channels")),!t&&a.a.createElement("div",{className:"authorization"},a.a.createElement("p",null,"You need to authorize the application to access your Youtube playlists."),a.a.createElement("p",null,"Click the"," ",a.a.createElement("button",{onClick:this.authorize},"Authorize")," ","button to allow the access.")),a.a.createElement(V.c,null,a.a.createElement(V.a,{path:"/browse-playlists",render:function(e){return a.a.createElement(q,Object.assign({},e,{isAuthorized:t}))}}),a.a.createElement(V.a,{path:"/move-videos",render:function(e){return a.a.createElement(B,Object.assign({},e,{isAuthorized:t}))}}),a.a.createElement(V.a,{path:"/playlists",render:function(e){return a.a.createElement(M,Object.assign({},e,{isAuthorized:t}))}}),a.a.createElement(V.a,{path:"/subscriptions",render:function(e){return a.a.createElement(U,Object.assign({},e,{isAuthorized:t}))}}),a.a.createElement(V.a,{path:"/videos/:playlistid",render:function(e){return a.a.createElement(L,Object.assign({},e,{isAuthorized:t}))}}),a.a.createElement(V.a,{path:"/channels",render:function(e){return a.a.createElement(T,Object.assign({},e,{isAuthorized:t}))}}))))}}]),t}(i.Component),Y=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function J(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}function K(){}console.log=K,console.warn=K,console.error=K,r.a.render(a.a.createElement(W,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/youtube-playlist-editor",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/youtube-playlist-editor","/service-worker.js");Y?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):J(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):J(e)})}}()}},[[27,1,2]]]);
//# sourceMappingURL=main.f03f0185.chunk.js.map